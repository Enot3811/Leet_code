"""200. Number of Islands

https://leetcode.com/problems/number-of-islands/

Given an m x n 2D binary grid grid which represents a map of '1's (land)
and '0's (water), return the number of islands.

An island is surrounded by water and is formed by connecting adjacent lands horizontally
or vertically. You may assume all four edges of the grid are all surrounded by water. 

Example 1:
Input: grid = [
  ["1","1","1","1","0"],
  ["1","1","0","1","0"],
  ["1","1","0","0","0"],
  ["0","0","0","0","0"]
]
Output: 1

Example 2:
Input: grid = [
  ["1","1","0","0","0"],
  ["1","1","0","0","0"],
  ["0","0","1","0","0"],
  ["0","0","0","1","1"]
]
Output: 3

Constraints:
m == grid.length
n == grid[i].length
1 <= m, n <= 300
grid[i][j] is '0' or '1'.
"""

# Размышления
# Воспользуемся алгоритмом закраски, чтобы находить фигуры (острова или воду).
# Все элементы, которые мы прошли и закрасили будем помечать в табличке,
# чтобы не обрабатывать их вновь.
# За каждый остров, который начали закрашивать +1. За воду ничего.

from typing import List
from collections import deque

class Solution:
    def numIslands(self, grid: List[List[str]]) -> int:
        stack = deque()
        h = len(grid)
        w = len(grid[0])
        n_islands = 0
        steps = [(0, 1), (1, 0), (0, -1), (-1, 0)]
        for i in range(h):
            for j in range(w):
                if grid[i][j] == '1':
                    n_islands += 1
                    grid[i][j] = '2'
                    # Закраска
                    stack.append((i, j))
                    while stack:
                        n, m = stack.pop()
                        for step_n, step_m in steps:
                            new_n = n + step_n
                            new_m = m + step_m
                            if (0 <= new_n < h and
                                0 <= new_m < w and
                                grid[new_n][new_m] == '1'
                            ):
                                stack.append((new_n, new_m))
                                grid[new_n][new_m] = '2'
        return n_islands


sol = Solution()
cases = [
    ([
        ["1","1","0","1","1"],
        ["1","1","0","1","1"],
        ["1","0","1","0","1"],
        ["1","1","1","1","1"]
    ], 1),
    ([
        ["1","1","0","1","1"],
        ["1","0","0","0","1"],
        ["1","1","0","1","1"],
        ["1","0","0","0","1"],
        ["1","1","0","1","1"]
    ], 2),
    ([
        ["1","1","1","1","1"],
        ["1","0","1","0","1"],
        ["1","1","0","1","1"],
        ["1","0","1","0","1"],
        ["1","1","1","1","1"]
    ], 1),
    ([
        ["1","1","1","1","0"],
        ["1","1","0","1","0"],
        ["1","1","0","0","0"],
        ["0","0","0","0","0"]
    ], 1),
    ([
        ["1","1","0","0","0"],
        ["1","1","0","0","0"],
        ["0","0","1","0","0"],
        ["0","0","0","1","1"]
    ], 3),
    ([
        ["1","1","1","0","0"],
        ["0","0","0","1","1"],
    ], 2),
    ([
        ["1","1","1","0","0"],
        ["0","0","1","1","1"],
    ], 1),
    ([
        ["1","1","1","0","1"],
        ["0","0","0","1","1"],
    ], 2),
    ([
        ["1","1","1","1","1"],
        ["1","0","1","0","1"],
        ["1","1","1","1","1"]
    ], 1),
    ([
        ["1","0","1","0","1"],
        ["1","1","1","1","1"],
        ["1","0","1","0","1"]
    ], 1),
    ([
        ["1","0","1","0","1"],
        ["0","1","0","1","0"],
    ], 5),
    ([
        ["0","0","0","0","0"],
        ["0","0","0","0","0"],
    ], 0),
    ([
        ["1"],
        ["0"],
        ["0"],
    ], 1),
    ([
        ["1"],
        ["0"],
        ["1"],
    ], 2),
    ([
        ["1"],
    ], 1),
    ([
        ["1","0","1"],
    ], 2),
    ([
        ["1","1","0","1","0"],
        ["0","1","1","1","0"],
        ["0","1","0","1","1"],
        ["1","1","0","0","0"]
    ], 1),
    ([
        ["1","1","1","1","1","0","1","1"],
        ["1","0","0","0","1","0","1","0"],
        ["1","0","1","0","1","0","1","1"],
        ["1","0","0","0","1","0","0","1"],
        ["1","1","1","1","1","0","1","1"],
        ["0","1","0","0","0","0","0","0"],
        ["1","1","0","1","1","1","0","0"]
    ], 4),
    ([
        ["1","1","1"],
        ["1","0","1"],
        ["1","1","1"],
        ["1","0","1"],
        ["1","1","1"],
        ["1","0","1"],
        ["1","1","1"],
        ["1","0","1"],
        ["1","1","1"],
        ["1","0","1"],
        ["1","1","1"],
        ["1","0","1"],
    ], 1),
    ([
        ["1","1","1","1","1","0","1","1","1","1","1","1","1","1","1","0","1","0","1","1"],
        ["0","1","1","1","1","1","1","1","1","1","1","1","1","0","1","1","1","1","1","0"],
        ["1","0","1","1","1","0","0","1","1","0","1","1","1","1","1","1","1","1","1","1"],
        ["1","1","1","1","0","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],
        ["1","0","0","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],
        ["1","0","1","1","1","1","1","1","0","1","1","1","0","1","1","1","0","1","1","1"],
        ["0","1","1","1","1","1","1","1","1","1","1","1","0","1","1","0","1","1","1","1"],
        ["1","1","1","1","1","1","1","1","1","1","1","1","0","1","1","1","1","0","1","1"],
        ["1","1","1","1","1","1","1","1","1","1","0","1","1","1","1","1","1","1","1","1"],
        ["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],
        ["0","1","1","1","1","1","1","1","0","1","1","1","1","1","1","1","1","1","1","1"],
        ["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],
        ["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],
        ["1","1","1","1","1","0","1","1","1","1","1","1","1","0","1","1","1","1","1","1"],
        ["1","0","1","1","1","1","1","0","1","1","1","0","1","1","1","1","0","1","1","1"],
        ["1","1","1","1","1","1","1","1","1","1","1","1","0","1","1","1","1","1","1","0"],
        ["1","1","1","1","1","1","1","1","1","1","1","1","1","0","1","1","1","1","0","0"],
        ["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],
        ["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],
        ["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"]
    ], 1)
]
for grid, ans in cases:
    res = sol.numIslands(grid)
    print(*grid, sep='\n')
    print(res, ans)
