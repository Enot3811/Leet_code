!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){if(this instanceof e){var r=[null];return r.push.apply(r,arguments),new(Function.bind.apply(t,r))}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var r,n,o={},i={},a={},s={};function u(){return n||(n=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EventeaQueueObserver=e.EventeaQueue=e.EventeaStatistQueue=void 0;var t=function(){if(r)return s;r=1,Object.defineProperty(s,"__esModule",{value:!0}),s.EventeaStatistQueue=void 0;const e="eventeaStatist";return s.EventeaStatistQueue=class{constructor(){this.instance=null,this.resolveInstance=()=>{},this.instancePromise=new Promise((e=>{this.resolveInstance=e})),this.updateClientParameters=(...e)=>{if(this.instance)return this.instance.updateClientParameters(...e);this.instancePromise.then((t=>t.updateClientParameters(...e)))},this.updateABGroups=(...e)=>{if(this.instance)return this.instance.updateABGroups(...e);this.instancePromise.then((t=>t.updateABGroups(...e)))};const t=e=>{this.instance=e,this.resolveInstance(e)},r=window[e];if(r)return void t(r);const n=Object.getOwnPropertyDescriptor(window,e);Object.defineProperty(window,e,{set:e=>{var r;null===(r=null==n?void 0:n.set)||void 0===r||r.call(n,e),t(e)},configurable:!0})}},s}();Object.defineProperty(e,"EventeaStatistQueue",{enumerable:!0,get:function(){return t.EventeaStatistQueue}});const n="undefined"!=typeof window?window:void 0;e.EventeaQueue=class{__addEventToStore(...e){(null==n?void 0:n._evnteq)&&n._evnteq.push(...e)}get getQueue(){var e;return Array.isArray(null==n?void 0:n._evnteq)?null==n?void 0:n._evnteq:null===(e=null==n?void 0:n._evnteq)||void 0===e?void 0:e.queue}constructor(e){var t,r;this.errorHandlers=null==e?void 0:e.errorHandlers,n?!n._evnteq&&(n._evnteq=[]):null===(r=null===(t=this.errorHandlers)||void 0===t?void 0:t.handleQueueUsageAtServer)||void 0===r||r.call(t)}send(e){this.__addEventToStore(["send",e])}sendOnce(e){return this.__addEventToStore(["sendOnce",e]),!0}data(e){this.__addEventToStore(["data",e])}};e.EventeaQueueObserver=class{set watch(e){var t,r;this.observerSuspended?null===(r=null===(t=this.errorHandlers)||void 0===t?void 0:t.handleQueueUsageAtServer)||void 0===r||r.call(t):(this.watcher=e,this.push(...this.queue),this.queue=[])}push(...e){var t,r;if(this.watcher)try{this.watcher(e)}catch(e){const{message:n}=e;null===(r=null===(t=this.errorHandlers)||void 0===t?void 0:t.handleObserverWatcherErrors)||void 0===r||r.call(t,n)}else this.queue.push(...e)}constructor(e){var t,r;this.observerSuspended=!1,this.queue=[],this.errorHandlers=null==e?void 0:e.errorHandlers,n?(Array.isArray(n._evnteq)&&this.queue.push(...n._evnteq),n._evnteq=this):(this.observerSuspended=!0,null===(r=null===(t=this.errorHandlers)||void 0===t?void 0:t.handleQueueUsageAtServer)||void 0===r||r.call(t))}}}(a)),a}var c,l={},d={};var f,p={};var v,h={};var m,g={},y={};var b,S,_={};function k(){return S||(S=1,t=g,s=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),u=e&&e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)},Object.defineProperty(t,"__esModule",{value:!0}),u((m||(m=1,Object.defineProperty(y,"__esModule",{value:!0}),y.EventeaFeaturesBits=void 0,function(e){e[e.DiagStats=1]="DiagStats"}(r||(y.EventeaFeaturesBits=r={}))),y),t),u((b||(b=1,Object.defineProperty(_,"__esModule",{value:!0}),_.DiagMessageType=_.HandlerStatus=_.SentStatus=_.IncompleteReason=void 0,_.sendDiagMessage=function(e){if("undefined"!=typeof window)try{const t=new CustomEvent("__evntx10t",{bubbles:!0,detail:e});document.dispatchEvent(t)}catch(e){}},function(e){e[e.MissedProject=0]="MissedProject",e[e.MissedRouting=1]="MissedRouting",e[e.MissedEvent=2]="MissedEvent",e[e.MissedRoutes=3]="MissedRoutes"}(n||(_.IncompleteReason=n={})),function(e){e[e.Routed=0]="Routed",e[e.IncompleteRouting=1]="IncompleteRouting",e[e.Deprecated=2]="Deprecated",e[e.Dead=3]="Dead"}(o||(_.SentStatus=o={})),function(e){e[e.Handled=0]="Handled",e[e.MissedHandler=1]="MissedHandler",e[e.HandlerErrored=2]="HandlerErrored"}(i||(_.HandlerStatus=i={})),function(e){e[e.SendStart=0]="SendStart",e[e.SentStats=1]="SentStats"}(a||(_.DiagMessageType=a={}))),_),t)),g;var t,r,n,o,i,a,s,u}var w,j,P,C={};function O(){if(j)return l;j=1,Object.defineProperty(l,"__esModule",{value:!0}),l.Eventea=void 0;const e=function(){if(c)return d;c=1,Object.defineProperty(d,"__esModule",{value:!0}),d.EventeaBeerClient=void 0;const e=64e3;return d.EventeaBeerClient=class{constructor(e){if(this.batch=[],this.timer=null,"undefined"==typeof window)throw new Error("Eventea beer client is not isomorphic package");{const{baseUrl:t,batching:r}=e;this._request=e=>fetch(`${t}${e.method}`,{...e,method:e.httpMethod,keepalive:null==r?void 0:r.batchingEnable}).then((e=>e.json())),this.batchingEnable=(null==r?void 0:r.batchingEnable)||!1,this.batchSize=(null==r?void 0:r.batchSize)||50,this.batchDelay=(null==r?void 0:r.batchDelay)||50,document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this.sendRemainingBatch()}))}}event(e){const t=this.formatEvent(e);return this.batchingEnable?(this.batch.push(t),this.batchSize>this.batch.length?(1===this.batch.length&&(this.timer=setTimeout((()=>this.sendBatch()),this.batchDelay)),Promise.resolve()):this.sendBatch()):this.sendImmediately(t)}sendAbstractEvent(e){this.event(e)}formatEvent(e){var t,r,n,o,i;const a=(null===(t=e.handlersData)||void 0===t?void 0:t.blockType)||(null===(r=e.payload)||void 0===r?void 0:r.blockType),s=(null===(n=e.handlersData)||void 0===n?void 0:n.blockProject)||(null===(o=e.payload)||void 0===o?void 0:o.blockProject);return{project:e.project,event:e.event,payload:{...e.payload||{},appName:null===(i=e.handlersData)||void 0===i?void 0:i.appName,blockType:a,blockProject:s}}}sendRequest(e){return this._request({method:"event",httpMethod:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"},credentials:"omit"}).catch((()=>{}))}sendImmediately(e){return this.sendRequest(e)}calculateBatchSize(e){const t=JSON.stringify(e);return new Blob([t]).size}splitBatch(t){const r=[];let n=[];if(this.calculateBatchSize(t)<=e)return[t];for(const o of t){if(this.calculateBatchSize([o])>e){this.sendRequest({project:"eventea",event:"keepAliveDataExceed",payload:{eventName:o.event}});continue}const t=[...n,o];this.calculateBatchSize(t)>e?(r.push(n),n=[o]):n=t}return n.length>0&&r.push(n),r}async sendBatch(){const e=this.splitBatch(this.batch);this.batch=[],this.timer&&(clearTimeout(this.timer),this.timer=null);for(const t of e)await this.sendRequest(t)}sendRemainingBatch(){this.batch.length>0&&this.sendBatch()}},d}(),t=(f||(f=1,Object.defineProperty(p,"__esModule",{value:!0}),p.EventeaDataState=void 0,p.EventeaDataState=class{constructor(e){this.__state={},(null==e?void 0:e.initData)&&e.initData&&(this.__state=e.initData)}add(e){const{project:t,payload:r}=e;this.__state[t]={...this.__state[t],...r}}get(e,t){if(this.__state[e])return this.__state[e][t]}get _getAll(){return this.__state}}),p),r=function(){if(v)return h;v=1,Object.defineProperty(h,"__esModule",{value:!0}),h.sendPostMessage=void 0;const e="undefined"!=typeof window?window:void 0;return h.sendPostMessage=({type:t,payload:r,config:n={}})=>{const{targetOrigin:o="*",payloadProperty:i}=n;e&&(e.top||e.opener||e.parent).postMessage(JSON.stringify({type:t,...i?{[i]:r}:r}),o)},h}(),n=k(),o=k(),i=function(){if(w)return C;function e(e,t){return("string"==typeof e||"number"==typeof e||"boolean"==typeof e)&&t.includes(e)}return w=1,Object.defineProperty(C,"__esModule",{value:!0}),C.filterPayloadByWhitelist=function(t,r){const n={...t};for(const o in r)if(o in t&&o in r)for(const i in r[o])i in t&&e(t[i],r[o][i])||delete n[o];return n},C}();class a{constructor(n){if(this.defaultEventHandlers={...n.defaultEventHandlers},this.defaultDataHandlers={...n.defaultDataHandlers},"undefined"==typeof window||window.__evntfxb1ts||(window.__evntfxb1ts=o.EventeaFeaturesBits.DiagStats),this.defaultEventHandlers.postMessage=({event:e,config:t,payload:n})=>(0,r.sendPostMessage)({type:e,config:t,payload:n}),n.beerBaseUrl){const t=new e.EventeaBeerClient({baseUrl:n.beerBaseUrl,batching:n.batchingConfig});this.defaultEventHandlers["eventea-beer"]=e=>null==t?void 0:t.sendAbstractEvent(e)}this.routingClientLoader=n.routingClientLoader,this.projectConfigurationMap=n.projectConfigurationMap,this.errorHandlers=n.errorHandlers,this.handlersData=n.handlersData||{},this.onceSentEvents=n.onceSentEvents||new Map,this.handleAnyEvent=n.handleAnyEvent,this.eventeaDataState=new t.EventeaDataState({initData:n.data}),this.eventeaReferenceDataState=n.referenceData}doSend(e){var t,r,o,a;const{project:s,event:u}=e,c=this.projectConfigurationMap[s];let l=e;const d=t=>(0,n.sendDiagMessage)({type:n.DiagMessageType.SentStats,event:e,stats:t});if(!c)return this.errorHandlers.handleMissedProject({event:u,project:s}),void d({status:n.SentStatus.IncompleteRouting,reason:n.IncompleteReason.MissedProject});const f=c.routing;if(!f)return this.errorHandlers.handleMissedRouting({project:s}),void d({status:n.SentStatus.IncompleteRouting,reason:n.IncompleteReason.MissedProject});const p=f.events;if(!p)return this.errorHandlers.handleMissedRouting({project:s}),void d({status:n.SentStatus.IncompleteRouting,reason:n.IncompleteReason.MissedRouting});const v=p[u];if(!v)return this.errorHandlers.handleMissedEvent({event:u,project:s}),void d({status:n.SentStatus.IncompleteRouting,reason:n.IncompleteReason.MissedEvent});if(l.payload&&"allowIfMatch"in v&&v.allowIfMatch&&(l.payload=(0,i.filterPayloadByWhitelist)(l.payload,v.allowIfMatch)),"fromData"in v&&v.fromData){const{fromData:e}=v,t={};Object.keys(e).forEach((r=>{const n=this.getDataFromState(s,r,e);n&&(t[r]=n)})),l={...l,payload:{...t,...l.payload}}}const h=this._getTracking();if("fromDataPool"in v&&v.fromDataPool&&h){const e={};for(const t of Object.keys(v.fromDataPool)){const r=v.fromDataPool[t];r in h._prot.dataPool&&(e[t]=h._prot.dataPool[r])}const t=h._prot.collectDataElements(e);l={...l,payload:{...t,...l.payload}}}let m=this.handlersData;if(f.statist&&(m={...m,statist:f.statist}),this.handleAnyEvent&&this.handleAnyEvent({...l,eventRouting:v,handlersData:m}),"isDeprecated"in v&&v.isDeprecated)return null===(r=(t=this.errorHandlers).handleDeprecatedEvent)||void 0===r||r.call(t,{event:u,project:s}),void d({status:n.SentStatus.Deprecated});if(!("routes"in v))return null===(a=(o=this.errorHandlers).handleMissedRoutes)||void 0===a||a.call(o,{event:u,project:s}),void d({status:n.SentStatus.IncompleteRouting,reason:n.IncompleteReason.MissedRoutes});const g=Object.getOwnPropertyNames(v.routes);if(this.debugLogEvent(e,g),0==g.length)d({status:n.SentStatus.Dead});else{const e={};g.forEach((t=>{var r;const o=(null===(r=c.eventHandlers)||void 0===r?void 0:r[t])||this.defaultEventHandlers[t];if(!o)return this.errorHandlers.handleMissedEventHandler({project:s,event:u,routeHandlerName:t}),void(e[t]={status:n.HandlerStatus.MissedHandler});const i=v.routes[t],a={...l,config:i,handlersData:m};try{o(a),e[t]={status:n.HandlerStatus.Handled}}catch(r){if(e[t]={status:n.HandlerStatus.HandlerErrored,error:r},!this.errorHandlers.handleEventHandlerError)throw r;this.errorHandlers.handleEventHandlerError(r,t,a)}})),d({status:n.SentStatus.Routed,routesStats:e})}}send(e){const t=e;(0,n.sendDiagMessage)({type:n.DiagMessageType.SendStart,event:t});const{project:r}=t,o=this.projectConfigurationMap[r];(null==o?void 0:o.routing)||!this.routingClientLoader?this.doSend(t):this.restoreProjectConfiguration(r).catch((()=>{(0,n.sendDiagMessage)({type:n.DiagMessageType.SentStats,event:t,stats:{status:n.SentStatus.IncompleteRouting,reason:n.IncompleteReason.MissedProject}})})).then((()=>{this.doSend(t)}))}sendOnce(e,t=!0,r=[]){const n=e,o=`${n.project}/${n.event}`;this.onceSentEvents.has(o)||this.onceSentEvents.set(o,new Set);const i=this.onceSentEvents.get(o);return!i.has(t)&&(this.send(n),r.forEach((e=>{i.add(e)})),i.add(t),!0)}doData(e){var t,r,n,o;const{project:i}=e,a=this.projectConfigurationMap[i];if(!a)return void(null===(r=(t=this.errorHandlers).handleMissedDataProject)||void 0===r||r.call(t,{project:i}));const{dataHandlers:s={}}=a,u={...this.defaultDataHandlers,...s};for(const t of Object.keys(u)){const r=u[t];"function"==typeof r?r(e):null===(o=(n=this.errorHandlers).handleMissedDataHandler)||void 0===o||o.call(n,{project:i,handlerName:t})}this.eventeaDataState.add(e)}data(e){const t=e,{project:r}=t,n=this.projectConfigurationMap[r];(null==n?void 0:n.routing)||!this.routingClientLoader?this.doData(t):this.restoreProjectConfiguration(r).finally((()=>{this.doData(t)}))}restoreProjectConfiguration(e){const t=this.projectConfigurationMap[e];return!(null==t?void 0:t.routing)&&this.routingClientLoader?this.routingClientLoader.getRouting(e).then((r=>{t?t.routing=r:this.projectConfigurationMap[e]={routing:r}}),(t=>{var r,n;throw t||null===(n=(r=this.errorHandlers).handleMissedClientRouting)||void 0===n||n.call(r,{project:e}),t})):Promise.resolve()}replicateWithData(e){const t={...this.eventeaDataState._getAll,...null==e?void 0:e.additionalDataState};return new a({errorHandlers:this.errorHandlers,handlersData:{...this.handlersData,...null==e?void 0:e.additionalHandlersData},projectConfigurationMap:this.projectConfigurationMap,onceSentEvents:this.onceSentEvents,defaultEventHandlers:this.defaultEventHandlers,defaultDataHandlers:this.defaultDataHandlers,data:t})}getDataFromState(e,t,r){var n,o;const i=r[t];return null!==(n=this.eventeaDataState.get(e,i))&&void 0!==n?n:null===(o=this.eventeaReferenceDataState)||void 0===o?void 0:o.get(e,i)}_getTracking(){if("undefined"!=typeof window&&window.tracking&&tracking._prot)return window.tracking}debugLogEvent(e,t){try{if("undefined"!=typeof window&&window.localStorage.getItem("eventeaLog")){const{project:r,event:n,payload:o}=e;console.log(`%c[Eventea]%c send event %c${r}/${n}%c to [${t.length?t.join(","):"0 routes"}]`,"background: yellow","","font-weight: bold","",null!=o?o:"")}}catch(e){}}}return l.Eventea=a,l}var M,E,D={};var R,A=(E||(E=1,function(t){var r=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e&&e.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.RootEventea=t.Eventea=void 0;const o=function(){if(P)return i;P=1,Object.defineProperty(i,"__esModule",{value:!0}),i.RootEventea=void 0;const e=u(),t=O();return i.RootEventea=class extends t.Eventea{constructor(t){super(t),this.eventeaQueueObserver=new e.EventeaQueueObserver({errorHandlers:{handleQueueUsageAtServer:this.errorHandlers.handleQueueUsageAtServer,handleObserverWatcherErrors:this.errorHandlers.handleObserverWatcherErrors}}),this.eventeaQueueObserver.watch=e=>{e.forEach((([e,t])=>{var r,n,o,i;try{switch(e){case"send":this.send(t);break;case"sendOnce":this.sendOnce(t);break;case"data":this.data(t);break;default:null===(n=(r=this.errorHandlers).handleUnknownMethodInQueue)||void 0===n||n.call(r,{requestType:e})}}catch(r){null===(i=(o=this.errorHandlers).handleErrorQueueEvent)||void 0===i||i.call(o,{requestType:e,requestData:t})}}))}}createChild(e){const r=e.copyParentHandlersData?{...this.handlersData,...null==e?void 0:e.handlersData}:e.handlersData;return new t.Eventea({referenceData:e.includeParentDataState?this.eventeaDataState:void 0,defaultDataHandlers:this.defaultDataHandlers,defaultEventHandlers:this.defaultEventHandlers,errorHandlers:this.errorHandlers,handlersData:r,projectConfigurationMap:this.projectConfigurationMap,routingClientLoader:this.routingClientLoader})}},i}();Object.defineProperty(t,"Eventea",{enumerable:!0,get:function(){return o.RootEventea}}),Object.defineProperty(t,"RootEventea",{enumerable:!0,get:function(){return o.RootEventea}}),n((M||(M=1,Object.defineProperty(D,"__esModule",{value:!0})),D),t)}(o)),o),T={},x={},I={},U={};function L(){return R||(R=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.requestWithRetry=e.handleRetryOptions=void 0;const t=async e=>{const{timeout:t=5e3,url:r}=e,n=new AbortController,o=((e,t)=>setTimeout((()=>e.abort()),t))(n,t),i=await fetch(r,{...e,signal:n.signal});return clearTimeout(o),i};e.handleRetryOptions=e=>{const t={timeout:null==e?void 0:e.timeout,retry:null==e?void 0:e.retry,retryTimeout:null==e?void 0:e.retryTimeout};return t.retry=t.retry?t.retry:t.timeout&&t.retryTimeout?t.timeout/t.retryTimeout:2,t.retryTimeout=t.retryTimeout?t.retryTimeout:t.timeout&&t.retry?t.timeout/t.retry:2500,t.timeout=t.timeout?t.timeout:t.retryTimeout&&t.retry?t.retryTimeout*t.retry:15e3,t};e.requestWithRetry=async(r,n)=>{var o;const{retry:i,retryTimeout:a}=(0,e.handleRetryOptions)(n);let s,u,c;for(const e of function*(){let e=0;for(;i>e;)yield t({url:r,timeout:a}),e+=1}())try{s=await e;break}catch(e){u=e;continue}if(!s)throw u;return(null===(o=s.headers.get("content-type"))||void 0===o?void 0:o.includes("application/json"))?c=await s.json():s&&(c=await s.text()),{status:s.status,body:c}}}(U)),U}var H,q,B,N,$={};function z(){return q||(q=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ClientSingleLoader=e.requestWithRetry=void 0;const t=L(),r=(H||(H=1,Object.defineProperty($,"__esModule",{value:!0}),$.routingValidator=void 0,$.routingValidator={check:e=>!(!e||"object"!=typeof e||!e.version||!e.events||"v4"!==e.version),getErrors:e=>[`${JSON.stringify(e)}: doesn't match a valid v4 routing schema`]}),$);var n=L();Object.defineProperty(e,"requestWithRetry",{enumerable:!0,get:function(){return n.requestWithRetry}});e.ClientSingleLoader=class{constructor(e){this.currentRequest=null,this.makeRequest=()=>{this.currentRequest=this.request(this.url,{timeout:this.timeout}),this.currentRequest.then((e=>{400>e.status?r.routingValidator.check(e.body)?this.currentRouting=e.body:this.handleRequestError({project:this.project,validationErrors:r.routingValidator.getErrors(e.body)}):this.handleRequestError({project:this.project,status:e.status})}),(e=>{this.handleRequestError({project:this.project,reason:e})})).finally((()=>{this.currentRequest=null}))};const{url:n,baseUrl:o,projectName:i,timeout:a=5e3,fallback:s}=e;if(this.project=i,this.url=n||((e,t)=>{let r=t;return t.endsWith("/")||(r+="/"),`${r}v4/${e}.json`})(i,o),this.handleRequestError=e.handleRequestError,this.timeout=a,this.request=t.requestWithRetry,s){if(!r.routingValidator.check(s)){const t=r.routingValidator.getErrors(e.fallback);throw new Error(`fallback должен быть валидным роутингом:\n${t.join("\n")}`)}this.fallback=s}}handleRequest(){this.currentRouting||this.currentRequest||this.makeRequest()}getRouting(){return this.handleRequest(),this.currentRouting?Promise.resolve(this.currentRouting):this.currentRequest?this.currentRequest.then((()=>{const e=this.currentRouting||this.fallback;return e||Promise.reject(void 0)}),(()=>this.fallback?this.fallback:Promise.reject(void 0))):Promise.reject(void 0)}}}(I)),I}var Q,V,F,J=(N||(N=1,Q=T,V=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),F=e&&e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||V(t,e,r)},Object.defineProperty(Q,"__esModule",{value:!0}),F(function(){if(B)return x;B=1,Object.defineProperty(x,"__esModule",{value:!0}),x.ClientLoader=void 0;const e=z(),t=()=>({});return x.ClientLoader=class{constructor(r){this.projectSingleLoaders={},this.getSingleLoaderInstance=t=>new e.ClientSingleLoader({projectName:"string"==typeof t?t:t.projectName,fallback:"string"==typeof t?void 0:t.fallback,handleRequestError:this.handleRequestError,timeout:this.timeout,baseUrl:this.baseUrl}),this.getPreloadRoutings=()=>{for(const e of this.preloadProjects){const t="string"==typeof e?e:e.projectName;this.projectSingleLoaders[t]=this.getSingleLoaderInstance(e),this.projectSingleLoaders[t].handleRequest()}},this.addNewLoaderInstance=e=>(this.projectSingleLoaders[e]=this.getSingleLoaderInstance(e),this.projectSingleLoaders[e]);const{baseUrl:n,preloadProjects:o,timeout:i,handleRequestError:a}=r;this.preloadProjects=o,this.baseUrl=n,this.timeout=i,this.handleRequestError=a||t,this.getPreloadRoutings()}async getRouting(e){return e in this.projectSingleLoaders?this.projectSingleLoaders[e].getRouting():this.addNewLoaderInstance(e).getRouting()}},x}(),Q)),T);const W={info:!0,warn:!0,error:!0,debug:!0,trace:!0,fatal:!0};var G={},X={},Z=function(){return Z=Object.assign||function(e){for(var t,r=1,n=arguments.length;n>r;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Z.apply(this,arguments)};function Y(e){return e.toLowerCase()}"function"==typeof SuppressedError&&SuppressedError;var K=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],ee=/[^A-Z0-9]+/gi;function te(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce((function(e,t){return e.replace(t,r)}),e)}function re(e,t){var r=e.charAt(0),n=e.substr(1).toLowerCase();return 0>=t||"0">r||r>"9"?""+r.toUpperCase()+n:"_"+r+n}function ne(e,t){return void 0===t&&(t={}),function(e,t){void 0===t&&(t={});for(var r=t.splitRegexp,n=t.stripRegexp,o=void 0===n?ee:n,i=t.transform,a=void 0===i?Y:i,s=t.delimiter,u=void 0===s?" ":s,c=te(te(e,void 0===r?K:r,"$1\0$2"),o,"\0"),l=0,d=c.length;"\0"===c.charAt(l);)l++;for(;"\0"===c.charAt(d-1);)d--;return c.slice(l,d).split("\0").map(a).join(u)}(e,Z({delimiter:"",transform:re},t))}function oe(e,t){return 0===t?e.toLowerCase():re(e,t)}var ie,ae,se=t(Object.freeze({__proto__:null,camelCaseTransform:oe,camelCaseTransformMerge:function(e,t){return 0===t?e.toLowerCase():function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}(e)},camelCase:function(e,t){return void 0===t&&(t={}),ne(e,Z({transform:oe},t))}}));function ue(){if(ie)return X;ie=1,Object.defineProperty(X,"__esModule",{value:!0}),X.statistHandlerFactory=function({statistClient:r}){return({event:n,payload:o,project:i,config:a,handlersData:s})=>{var u;let c=o||{};if(!function(e){return"object"==typeof e&&null!==e}(a))throw new Error("Unknown config for statist handler");{const l=`eventea.projects.${(0,e.camelCase)(i)}`,d=a.fullName||n,f=t(),p=s&&s.statist?s.statist:void 0;if(p&&p.commonParams&&f){const e={};for(const t of Object.keys(p.commonParams)){const{deprecated:r}=p.commonParams[t];!r&&t in f._prot.dataPool&&(e[t]=f._prot.dataPool[t])}c={...f._prot.collectDataElements(e),...c}}const{remapAsList:v}=a;if(v&&"eventea.projects.tjuchebnik"===l)for(const e of Object.keys(v))c[e]=v[e].params.map((t=>{var r,n,i;const a=(null===(r=v[e].paramsSource)||void 0===r?void 0:r[t])||"event";return"event"===a&&o&&t in o?String(null!==(n=o[t])&&void 0!==n?n:""):"dataPool"===a&&f&&t in f._prot.dataPool?String(null!==(i=f._prot.collectDataElement(f._prot.dataPool[t]))&&void 0!==i?i:""):""}));r.send(l,d,c);const h=null===(u=a.userProperties)||void 0===u?void 0:u.increment;h&&r.updateUserProperties(l,"increment",h)}}};const e=se;function t(){if("undefined"!=typeof window&&window.tracking&&tracking._prot)return window.tracking}return X}var ce=(ae||(ae=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.statistHandlerFactory=void 0;var t=ue();Object.defineProperty(e,"statistHandlerFactory",{enumerable:!0,get:function(){return t.statistHandlerFactory}})}(G)),G);const le=[];for(let e=0;256>e;++e)le.push((e+256).toString(16).slice(1));function de(e,t=0){return(le[e[t+0]]+le[e[t+1]]+le[e[t+2]]+le[e[t+3]]+"-"+le[e[t+4]]+le[e[t+5]]+"-"+le[e[t+6]]+le[e[t+7]]+"-"+le[e[t+8]]+le[e[t+9]]+"-"+le[e[t+10]]+le[e[t+11]]+le[e[t+12]]+le[e[t+13]]+le[e[t+14]]+le[e[t+15]]).toLowerCase()}let fe;const pe=new Uint8Array(16);function ve(){if(!fe){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");fe=crypto.getRandomValues.bind(crypto)}return fe(pe)}var he={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function me(e,t,r){if(he.randomUUID&&!t&&!e)return he.randomUUID();const n=(e=e||{}).random||(e.rng||ve)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;16>e;++e)t[r+e]=n[e];return t}return de(n)}const ge={};function ye(e,t,r){let n;if(e)n=be(e.random??e.rng?.()??ve(),e.msecs,e.seq,t,r);else{const e=Date.now(),o=ve();!function(e,t,r){e.msecs??=-1/0,e.seq??=0,t>e.msecs?(e.seq=r[6]<<23|r[7]<<16|r[8]<<8|r[9],e.msecs=t):(e.seq=e.seq+1|0,0===e.seq&&e.msecs++)}(ge,e,o),n=be(o,ge.msecs,ge.seq,t,r)}return t?n:de(n)}function be(e,t,r,n,o=0){return n||(n=new Uint8Array(16),o=0),t??=Date.now(),r??=127*e[6]<<24|e[7]<<16|e[8]<<8|e[9],n[o++]=t/1099511627776&255,n[o++]=t/4294967296&255,n[o++]=t/16777216&255,n[o++]=t/65536&255,n[o++]=t/256&255,n[o++]=255&t,n[o++]=112|r>>>28&15,n[o++]=r>>>20&255,n[o++]=128|r>>>14&63,n[o++]=r>>>6&255,n[o++]=r<<2&255|3&e[10],n[o++]=e[11],n[o++]=e[12],n[o++]=e[13],n[o++]=e[14],n[o++]=e[15],n}var Se,_e={},ke={},we={};var je,Pe={};var Ce,Oe,Me,Ee,De,Re,Ae,Te,xe,Ie,Ue={};function Le(){return Ee?Me:(Ee=1,Me=function(e){return!!e&&Array.isArray(e)})}function He(){return Te?Ae:(Te=1,Ae=function(e){return null!==e&&"object"==typeof e})}function qe(){if(Ie)return xe;Ie=1;var e=Oe?Ce:(Oe=1,Ce=function(e){return null==e}),t=Le(),r=Re?De:(Re=1,De=function(e){return"string"==typeof e||e instanceof String}),n=He();return xe=function(o){switch(!0){case e(o):return!0;case r(o):return""===o;case t(o):return 0===o.length;case n(o):return 0===Object.keys(o).length}return!1}}var Be,Ne,$e={},ze={};function Qe(){return Be||(Be=1,function(e){var t,r;Object.defineProperty(e,"__esModule",{value:!0}),e.DataConsentBit=e.CookieCategoryBit=void 0,(t=e.CookieCategoryBit||(e.CookieCategoryBit={}))[t.Essential=1]="Essential",t[t.Functionality=2]="Functionality",t[t.Statistics=4]="Statistics",t[t.Marketing=8]="Marketing",(r=e.DataConsentBit||(e.DataConsentBit={}))[r.PersonalDataProcessing=16]="PersonalDataProcessing"}(ze)),ze}function Ve(){if(Ne)return $e;Ne=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.consentCategories=$e.UserConsentAllowAll=$e.STRING_DATA_LIMIT=$e.SIXTY_DAYS=$e.internalMarkers=$e.positionPattern=void 0;var e=Qe();return $e.positionPattern=/^\d+(0|s|t)\d+$/,$e.internalMarkers=["internal_source"],$e.SIXTY_DAYS=5184e3,$e.STRING_DATA_LIMIT=255,$e.UserConsentAllowAll=0xfffffffffffff,$e.consentCategories={Essential:e.CookieCategoryBit.Essential,Functionality:e.CookieCategoryBit.Functionality,Statistics:e.CookieCategoryBit.Statistics,Marketing:e.CookieCategoryBit.Marketing,PersonalDataProcessing:e.DataConsentBit.PersonalDataProcessing},$e}var Fe,Je={};function We(){if(Fe)return Je;return Fe=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.isExternalNavigation=void 0,Je.isExternalNavigation=function(e,t,r){return void 0===e&&(e=[]),t!==r&&[t,r].some((function(t){return e.every((function(e){return t!==e&&!t.endsWith(".".concat(e))}))}))},Je}var Ge,Xe={};var Ze,Ye={};var Ke,et={};var tt,rt={};function nt(){if(tt)return rt;return tt=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.removeQueryParams=rt.parseQuery=void 0,rt.parseQuery=function(e,t,r){void 0===t&&(t="&"),void 0===r&&(r="=");for(var n={},o=0,i=e.split(t);i.length>o;o++){var a=String(i[o]).split(r),s=a[0],u=a.slice(1);if(s){var c=u.join(r);try{c=decodeURIComponent(c)}catch(e){}n[decodeURIComponent(s)]=c}}return n},rt.removeQueryParams=function(e){return e.split("?")[0]},rt}var ot,it={};function at(){if(ot)return it;ot=1,Object.defineProperty(it,"__esModule",{value:!0}),it.contextCookies=it.utmCookies=void 0;var e=Qe(),t=Ve().SIXTY_DAYS,r=e.CookieCategoryBit.Marketing|e.CookieCategoryBit.Statistics;return it.utmCookies={utmSource:{name:"utm_source",category:r,expires:t,subdomains:!0},utmContent:{name:"utm_content",category:r,expires:t,subdomains:!0},utmCampaign:{name:"utm_campaign",category:r,expires:t,subdomains:!0},utmMedium:{name:"utm_medium",category:r,expires:t,subdomains:!0},utmTerm:{name:"utm_term",category:r,expires:t,subdomains:!0},utmDateSet:{name:"utm_date_set",category:r,expires:t,subdomains:!0},sid:{name:"sid",category:r,expires:t,subdomains:!0},wm:{name:"wm",category:r,expires:t,subdomains:!0},visitorNewOrReturn:{name:"s_nr",category:r,expires:31536e3,subdomains:!0}},it.contextCookies={ctxSource:{name:"ctx_source",category:r,expires:t,subdomains:!0},ctxPosition:{name:"ctx_position",category:r,expires:t,subdomains:!0},ctxBlock:{name:"ctx_block",category:r,expires:t,subdomains:!0}},it}var st,ut,ct,lt,dt,ft,pt,vt={};function ht(){if(ut)return st;ut=1;var e=He();return st=function(t){return e(t)?Object.keys(t):[]}}function mt(){if(lt)return ct;lt=1;var e=ht();return ct=function(t){void 0===t&&(t={});for(var r=e(t),n=r.length,o=new Array(n),i=0;n>i;i++)o[i]=[r[i],t[r[i]]];return o},ct}function gt(){if(pt)return vt;pt=1;var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vt,"__esModule",{value:!0}),vt.truncateValuesAndMark=void 0;var r=t(mt()),n=t(ft?dt:(ft=1,dt=function(e){void 0===e&&(e=[]);for(var t={},r=0;e.length>r;r++)t[e[r][0]]=e[r][1];return t})),o=Ve();function i(e,t){var r=e,n=".cut";r.length>o.STRING_DATA_LIMIT&&(r=function(e,t){return e.slice(0,t)}(r,o.STRING_DATA_LIMIT-4));encodeURIComponent(r).length>t&&(r=function(e,t){var r=0,n=e.length+1;for(;n>r+1;){var o=Math.floor((r+n)/2);encodeURIComponent(e.slice(0,o)).length>t?n=o:r=o}return e.slice(0,r)}(r,t-4));return r===e?e:"".concat(r).concat(n)}return vt.truncateValuesAndMark=function(e,t){var o=(0,r.default)(t).map((function(t){var r=t[0],n=t[1];return"string"!=typeof n?[r,n]:[r,i(n,r in e?e[r]:e.default)]}));return(0,n.default)(o)},vt}var yt,bt,St={};function _t(){return yt||(yt=1,function(t){var r,n=e&&e.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;n>r;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.cookiesLimits=t.utmCookiesLimits=void 0;var o=at();t.utmCookiesLimits=((r={})[o.utmCookies.utmSource.name]=255,r.session_utm_source=255,r[o.utmCookies.utmTerm.name]=600,r[o.utmCookies.utmContent.name]=600,r[o.utmCookies.utmCampaign.name]=255,r[o.utmCookies.utmMedium.name]=255,r[o.utmCookies.sid.name]=140,r[o.utmCookies.wm.name]=100,r),t.cookiesLimits=n(n({},t.utmCookiesLimits),{default:72})}(St)),St}function kt(){return bt||(bt=1,function(t){var r=e&&e.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;n>r;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},n=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveUtmMarkers=t.contextMarkersCookies=t.utmMarkersCookies=void 0;var o,i=n(qe()),a=Ve(),s=We(),u=(Ge||(Ge=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.isString=void 0,Xe.isString=function(e){return"string"==typeof e}),Xe),c=(Ze||(Ze=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.pick=void 0,Ye.pick=function(e,t){for(var r={},n=0,o=e;o.length>n;n++){var i=o[n];i in t&&(r[i]=t[i])}return r}),Ye),l=function(){if(Ke)return et;Ke=1,Object.defineProperty(et,"__esModule",{value:!0}),et.safeSessionStorage=et.safeLocalStorage=et.SafeStorage=void 0;var e=function(){function e(e){this.clear=this.getSafeVersionOfMethod("clear",void 0),this.key=this.getSafeVersionOfMethod("key",null),this.setItem=this.getSafeVersionOfMethod("setItem",void 0),this.getItem=this.getSafeVersionOfMethod("getItem",null),this.removeItem=this.getSafeVersionOfMethod("removeItem",void 0),this.storageType=e}return Object.defineProperty(e.prototype,"length",{get:function(){try{return this.storage.length}catch(e){}return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){if(!this.storageImpl){var e={local:localStorage,session:sessionStorage};this.storageImpl=e[this.storageType]}return this.storageImpl},enumerable:!1,configurable:!0}),e.prototype.getSafeVersionOfMethod=function(e,t){var r=this;return function(){for(var n,o=[],i=0;arguments.length>i;i++)o[i]=arguments[i];try{return(n=r.storage)[e].apply(n,o)}catch(e){}return t}},e}();return et.SafeStorage=e,et.safeLocalStorage=new e("local"),et.safeSessionStorage=new e("session"),et}(),d=nt(),f=at(),p=gt(),v=_t();!function(e){e.source="source",e.position="position",e.block="block"}(o||(o={}));var h="session_utm_source";t.utmMarkersCookies=[f.utmCookies.utmSource,f.utmCookies.utmContent,f.utmCookies.utmCampaign,f.utmCookies.utmMedium,f.utmCookies.utmTerm,f.utmCookies.sid,f.utmCookies.wm],t.contextMarkersCookies=[f.contextCookies.ctxPosition,f.contextCookies.ctxBlock,f.contextCookies.ctxSource],t.resolveUtmMarkers=function(e){var n,m,g=e.cookies,y=e.location,b=e.referrer,S=e.parseUrl,_=e.internalDomains,k=t.utmMarkersCookies.map((function(e){return e.name})),w=t.contextMarkersCookies.map((function(e){return e.name})),j=y.query.parent_url,P=j?S(j):void 0,C=y.query.utm_source||!P?y.query:P.query,O=y.hash.replace("#",""),M=O?(0,d.parseQuery)(O):{},E=(0,c.pick)(a.internalMarkers,C),D=(0,c.pick)(k,C),R=(0,c.pick)(k,M),A=(0,i.default)(D)?R:D;function T(e,t){for(var r=0,n=e;n.length>r;r++){var o=n[r],i=t[o.name];i?g.set(o,i):g.remove(o.name,!0)}}function x(e){return(0,c.pick)(e,g.getAll())}function I(){return r({internal_source:""},E)}var U=!1,L=!1;return function(){var e,t,i,c,d;if(A.utm_source)return n=r(r({collectionMethod:"get",cookieDate:Date.now(),utm_source:"",session_utm_source:A.utm_source||""},I()),A),m=function(){var e=C[o.position];if(!(0,u.isString)(e))return{};var t,r={};return a.positionPattern.test(e)?(t=e.split(/\D/),r.ctx_position=t.length>1?t[1]:"",r.ctx_block=t[0]+e.replace(/\d/g,"")):(r.ctx_position=e,r.ctx_block=C[o.block]),r.ctx_source=C[o.source]||"",r}(),void(U=!0);if(t=x(k),i=Number(g.get("utm_date_set"))||null,c=l.safeSessionStorage.getItem(h)||"",d=null,t.utm_source&&(d="cookie"),n=r(r({collectionMethod:d,cookieDate:i,utm_source:"",session_utm_source:c},I()),t),b&&(0,s.isExternalNavigation)(_,y.hostname,b)){var f,p=null===(e=n.utm_source)||void 0===e?void 0:e.includes(".");if(!n.utm_source||p)return n=r({utm_source:f=b,session_utm_source:f,collectionMethod:"referrer",cookieDate:Date.now()},I()),m={},void(U=!0);n.session_utm_source||(n.session_utm_source=b,U=!0,L=!0)}}(),n=(0,p.truncateValuesAndMark)(v.cookiesLimits,n),m=(0,p.truncateValuesAndMark)(v.cookiesLimits,null!=m?m:{}),U&&function(e,r,n){void 0===n&&(n=!1),n||(g.set(f.utmCookies.utmDateSet,e.cookieDate||Date.now()),T(t.utmMarkersCookies,e),T(t.contextMarkersCookies,r||{})),e.session_utm_source&&l.safeSessionStorage.setItem(h,e.session_utm_source)}(n,m,L),m&&(m=x(w)),r(r({},m),{utmMarkers:n})}}(Ue)),Ue}var wt,jt={};function Pt(){return wt||(wt=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Xhr=t.n=t.w=t.d=t.g=void 0,t.g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:void 0,t.d=t.g.document,t.w=t.g.window,t.n=t.g.navigator,t.Xhr=t.g.XMLHttpRequest}(jt)),jt}var Ct,Ot={};function Mt(){if(Ct)return Ot;return Ct=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.checkCookieLimit=void 0,Ot.checkCookieLimit=function(e,t,r){var n=encodeURIComponent(r),o=e[t]||e.default;if(n.length>o)throw new Error("ECookieTooLarge: cookie ".concat(t," exceeds maximum length of ").concat(o," bytes"))},Ot}var Et,Dt={};var Rt={};var At,Tt=Object.freeze({__proto__:null,default:function(e){return e=e||Object.create(null),{on:function(t,r){(e[t]||(e[t]=[])).push(r)},off:function(t,r){e[t]&&e[t].splice(e[t].indexOf(r)>>>0,1)},emit:function(t){var r=[].slice.call(arguments,1);(e[t]||[]).map((function(e){e.apply(void 0,r)})),(e["*"]||[]).map((function(e){e.apply(void 0,[t].concat(r))}))}}}}),xt=t(Tt);var It,Ut,Lt,Ht={};function qt(){if(It)return Ht;It=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.extractDomain=void 0;var e=/^(?:::(?:ffff:(0:)?)?)?(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,t=/^([0-9a-fA-F]{1,4}:){1,4}:(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/;return Ht.extractDomain=function(r){return e.test(n=r)||t.test(n)?r:0>r.indexOf("localhost")?".".concat(r.split(".").slice(-2).join(".")):"localhost";var n},Ht}function Bt(){return Ut||(Ut=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DataConsentBit=t.CookieCategoryBit=t.isExternalNavigation=t.removeQueryParams=t.parseQuery=t.extractDomain=t.makeUserConsentVault=t.makeCookiesPubl=t.checkCookieLimit=t.Xhr=t.d=t.n=t.w=t.g=t.cookiesLimits=t.utmCookiesLimits=t.internalMarkers=t.consentCategories=t.utmCookies=t.contextCookies=t.contextMarkersCookies=t.utmMarkersCookies=t.resolveUtmMarkers=t.resolveReferrer=t.resolvePageUrl=void 0;var r=(Se||(Se=1,Object.defineProperty(we,"__esModule",{value:!0}),we.resolvePageUrl=void 0,we.resolvePageUrl=function(e){return e.hostname+e.pathname}),we);Object.defineProperty(t,"resolvePageUrl",{enumerable:!0,get:function(){return r.resolvePageUrl}});var n=(je||(je=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.resolveReferrer=void 0,Pe.resolveReferrer=function(e){var t=e.referrer,r="";return t&&t.hostname!==e.locationHostname&&(r=t.hostname),r}),Pe);Object.defineProperty(t,"resolveReferrer",{enumerable:!0,get:function(){return n.resolveReferrer}});var o=kt();Object.defineProperty(t,"resolveUtmMarkers",{enumerable:!0,get:function(){return o.resolveUtmMarkers}}),Object.defineProperty(t,"utmMarkersCookies",{enumerable:!0,get:function(){return o.utmMarkersCookies}}),Object.defineProperty(t,"contextMarkersCookies",{enumerable:!0,get:function(){return o.contextMarkersCookies}});var i=at();Object.defineProperty(t,"contextCookies",{enumerable:!0,get:function(){return i.contextCookies}}),Object.defineProperty(t,"utmCookies",{enumerable:!0,get:function(){return i.utmCookies}});var a=Ve();Object.defineProperty(t,"consentCategories",{enumerable:!0,get:function(){return a.consentCategories}}),Object.defineProperty(t,"internalMarkers",{enumerable:!0,get:function(){return a.internalMarkers}});var s=_t();Object.defineProperty(t,"utmCookiesLimits",{enumerable:!0,get:function(){return s.utmCookiesLimits}}),Object.defineProperty(t,"cookiesLimits",{enumerable:!0,get:function(){return s.cookiesLimits}});var u=Pt();Object.defineProperty(t,"g",{enumerable:!0,get:function(){return u.g}}),Object.defineProperty(t,"w",{enumerable:!0,get:function(){return u.w}}),Object.defineProperty(t,"n",{enumerable:!0,get:function(){return u.n}}),Object.defineProperty(t,"d",{enumerable:!0,get:function(){return u.d}}),Object.defineProperty(t,"Xhr",{enumerable:!0,get:function(){return u.Xhr}});var c=Mt();Object.defineProperty(t,"checkCookieLimit",{enumerable:!0,get:function(){return c.checkCookieLimit}});var l=(Et||(Et=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.makeCookiesPubl=void 0,Dt.makeCookiesPubl=function(e,t){var r={},n=function(t,r){e.set(t.name,r,t.expires,t.subdomains)};return t.on("update",(function(){for(var e=0,o=Object.keys(r);o.length>e;e++){var i=o[e],a=r[i],s=a.cookie,u=a.value;t.isAllowed(s.category)&&(n(s,u),delete r[i])}})),{get:function(t){return e.get(t)},getAll:function(){return e.getAll()},set:function(e,o){var i=t.isAllowed(e.category);return i?n(e,o):r[e.name]={cookie:e,value:o},i},remove:function(t,n){delete r[t],e.remove(t,n)}}}),Dt);Object.defineProperty(t,"makeCookiesPubl",{enumerable:!0,get:function(){return l.makeCookiesPubl}});var d=function(){if(At)return Rt;At=1;var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.makeUserConsentVault=void 0;var r=t(xt),n=Ve(),o=Qe();return Rt.makeUserConsentVault=function(e){void 0===e&&(e={});var t=e.defaults,i=void 0===t?n.UserConsentAllowAll:t,a=e.alwaysEnabled,s=void 0===a?o.CookieCategoryBit.Essential:a,u=i,c=(0,r.default)();return Object.assign(c,{once:function(e,t){var r=function(){c.off(e,r),t()};c.on(e,r)},isAllowed:function(e){return(this.getAllowedMask()&e)===e},resetAllTo:function(e){u=e,c.emit("update")},update:function(e,t){void 0===t&&(t="keep"),"enable"===t?u|=n.UserConsentAllowAll:"disable"===t&&(u=0);for(var r=0,o=Object.keys(e);o.length>r;r++){var i=Number(o[r]);e[i]?u|=i:u&=~i}c.emit("update")},getAllowedMask:function(){return(null!=u?u:i)|s},categories:n.consentCategories})},Rt}();Object.defineProperty(t,"makeUserConsentVault",{enumerable:!0,get:function(){return d.makeUserConsentVault}});var f=qt();Object.defineProperty(t,"extractDomain",{enumerable:!0,get:function(){return f.extractDomain}});var p=nt();Object.defineProperty(t,"parseQuery",{enumerable:!0,get:function(){return p.parseQuery}}),Object.defineProperty(t,"removeQueryParams",{enumerable:!0,get:function(){return p.removeQueryParams}});var v=We();Object.defineProperty(t,"isExternalNavigation",{enumerable:!0,get:function(){return v.isExternalNavigation}});var h=Qe();Object.defineProperty(t,"CookieCategoryBit",{enumerable:!0,get:function(){return h.CookieCategoryBit}}),Object.defineProperty(t,"DataConsentBit",{enumerable:!0,get:function(){return h.DataConsentBit}})}(ke)),ke}var Nt,$t,zt,Qt,Vt,Ft=(Lt||(Lt=1,function(t){var r=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e&&e.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),n(Bt(),t)}(_e)),_e),Jt={},Wt={},Gt={};function Xt(){return $t||($t=1,Nt=function(e,t){return function r(){for(var n=arguments.length,o=new Array(n),i=0;n>i;i++)o[i]=arguments[i];return e>o.length?function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];return r.apply(this,o.concat(t))}:t.apply(this,o)}}),Nt}function Zt(){if(Vt)return Gt;Vt=1;var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.resolvePreviousPage=void 0;var r=t(function(){if(Qt)return zt;Qt=1;var e=Xt();return zt=e(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var r=t,n=0;e.length>n;n++){if(null==r)return;r=r[e[n]]}return r}))}()),n=We(),o=nt(),i=Pt();return Gt.resolvePreviousPage=function(e){var t=e.referrer,a=e.location,s=e.internalDomains,u=1===(0,r.default)(["performance","navigation","type"],i.w)?a:t;if(u&&!(0,n.isExternalNavigation)(s,u.hostname,a.hostname))return(0,o.removeQueryParams)(u.href)},Gt}var Yt,Kt={};function er(){if(Yt)return Kt;Yt=1;var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.cookieStorage=Kt.CookieStorage=void 0;var r=t(mt()),n=Pt(),o=Mt(),i=_t(),a=qt(),s=function(){function e(e,t){this.limits=e,this.logger=t,this.isCookieAvailable=null,this.hasSamesiteNoneSupport=null,this.localState=Object.create(null)}return e.prototype.get=function(e){return this.checkCookieAvailability()?this.getCookie(e):this.getLocalState(e)},e.prototype.getAll=function(){return this.checkCookieAvailability()?this.getAllCookies():this.getAllLocalState()},e.prototype.set=function(e,t,r,n){this.checkCookieAvailability()&&this.setCookie(e,t,r,n),this.setLocalState(e,t)},e.prototype.remove=function(e,t){this.checkCookieAvailability()?this.removeCookie(e,t):this.removeLocalState(e)},e.prototype.checkCookieAvailability=function(){if(null!=this.isCookieAvailable)return this.isCookieAvailable;if(null==n.d.cookie)return this.isCookieAvailable=!1,this.isCookieAvailable;var e="test_cookie_sqJPwCiceI";n.d.cookie="".concat(e,"=true");var t=this.getCookie(e);return this.isCookieAvailable="true"===t,n.d.cookie="".concat(e,"=; expires=").concat(new Date(0).toUTCString()),this.isCookieAvailable},e.prototype.checkSamesiteNoneSupport=function(){if(null!=this.hasSamesiteNoneSupport)return this.hasSamesiteNoneSupport;if(!this.checkCookieAvailability())return this.hasSamesiteNoneSupport=!1,this.hasSamesiteNoneSupport;var e="test_cookie_yIKsyPp4Fh";n.d.cookie="".concat(e,"=true; samesite=none; secure");var t=this.getCookie(e);return this.hasSamesiteNoneSupport="true"===t,n.d.cookie="".concat(e,"=; expires=").concat(new Date(0).toUTCString()),this.hasSamesiteNoneSupport},e.prototype.getCookie=function(e){var t=this.getRawCookie(e);return t?decodeURIComponent(t):null},e.prototype.getAllCookies=function(){var e=this.getAllRawCookies();return(0,r.default)(e).reduce((function(e,t){return e[t[0]]=decodeURIComponent(t[1]),e}),{})},e.prototype.setCookie=function(e,t,r,i){var s;void 0===r&&(r="session"),void 0===i&&(i=!1);try{(0,o.checkCookieLimit)(this.limits,e,String(t))}catch(e){return void(null===(s=this.logger)||void 0===s||s.error(e))}var u=[];if(u.push("".concat(e,"=").concat(encodeURIComponent(t)),"path=/","domain=".concat(i?(0,a.extractDomain)(n.w.location.hostname):n.w.location.hostname)),"session"!==r){var c=0===r?new Date(0):new Date(Date.now()+1e3*r);u.push("expires=".concat(c.toUTCString()))}this.checkSamesiteNoneSupport()&&u.push("samesite=none","secure"),n.d.cookie=u.join("; ")},e.prototype.removeCookie=function(e,t){null!==this.getCookie(e)&&this.setCookie(e,"",0,t)},e.prototype.getLocalState=function(e){return this.localState[e]||null},e.prototype.getAllLocalState=function(){return this.localState},e.prototype.setLocalState=function(e,t){return this.localState[e]=t.toString(),t},e.prototype.removeLocalState=function(e){e in this.localState&&delete this.localState[e]},e.prototype.getRawCookie=function(e){return n.d.cookie.split("; ").reduce((function(t,r){var n=r.split("=");return n[0]===e?n[1]:t}),"")||null},e.prototype.getAllRawCookies=function(){return n.d.cookie.split("; ").reduce((function(e,t){var r=t.split("="),n=r[0];return n?(e[n]=r[1],e):e}),{})},e}();return Kt.CookieStorage=s,Kt.cookieStorage=new s(i.cookiesLimits),Kt}var tr,rr={};var nr,or,ir={},ar={};function sr(){if(nr)return ar;nr=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.locationWithQuery=void 0;var e=nt(),t=Pt();return ar.locationWithQuery=function(r){void 0===r&&(r=t.d.location);var n={get query(){return(0,e.parseQuery)(r.search.slice(1))},get pathname(){return"/"!==r.pathname.charAt(0)?"/".concat(r.pathname):r.pathname}};return["hash","host","hostname","href","port","protocol","search","origin"].forEach((function(e){Object.defineProperty(n,e,{get:function(){return r[e]},set:function(t){"origin"!==e&&(r[e]=t)},enumerable:!0})})),n},ar}function ur(){if(or)return ir;or=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.parseUrl=void 0;var e=sr(),t=Pt();return ir.parseUrl=function(r){var n=t.d.createElement("a");return n.href=r,(0,e.locationWithQuery)(n)},ir}var cr,lr,dr,fr={};function pr(){return lr||(lr=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.locationWithQuery=t.referrer=t.parseUrl=t.SafeCookieStorage=t.CookieStorage=t.cookieStorage=t.resolvePreviousPage=void 0;var r=Zt();Object.defineProperty(t,"resolvePreviousPage",{enumerable:!0,get:function(){return r.resolvePreviousPage}});var n=er();Object.defineProperty(t,"cookieStorage",{enumerable:!0,get:function(){return n.cookieStorage}}),Object.defineProperty(t,"CookieStorage",{enumerable:!0,get:function(){return n.CookieStorage}});var o=function(){if(tr)return rr;tr=1;var t,r=e&&e.__extends||(t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},t(e,r)},function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(rr,"__esModule",{value:!0}),rr.safeCookieStorage=rr.SafeCookieStorage=void 0;var n=er(),o=_t(),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.get=function(t){try{return e.prototype.get.call(this,t)}catch(r){return e.prototype.getRawCookie.call(this,t)}},t.prototype.getAll=function(){try{return e.prototype.getAll.call(this)}catch(t){return e.prototype.getAllRawCookies.call(this)}},t}(n.CookieStorage);return rr.SafeCookieStorage=i,rr.safeCookieStorage=new i(o.cookiesLimits),rr}();Object.defineProperty(t,"SafeCookieStorage",{enumerable:!0,get:function(){return o.SafeCookieStorage}});var i=ur();Object.defineProperty(t,"parseUrl",{enumerable:!0,get:function(){return i.parseUrl}});var a=function(){if(cr)return fr;cr=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.referrer=void 0;var e=ur(),t=Pt();return fr.referrer=function(){return t.d.referrer?(0,e.parseUrl)(t.d.referrer):void 0},fr}();Object.defineProperty(t,"referrer",{enumerable:!0,get:function(){return a.referrer}});var s=sr();Object.defineProperty(t,"locationWithQuery",{enumerable:!0,get:function(){return s.locationWithQuery}})}(Wt)),Wt}var vr,hr,mr=(dr||(dr=1,function(t){var r=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e&&e.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),n(pr(),t)}(Jt)),Jt),gr={},yr={};var br,Sr,_r,kr,wr,jr,Pr=(hr||(hr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.tBankInternalDomains=void 0;var t=(vr||(vr=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.tBankInternalDomains=void 0,yr.tBankInternalDomains=["tinkoff.ru","tinkoffinsurance.ru","dolyame.ru","tbank.ru"]),yr);Object.defineProperty(e,"tBankInternalDomains",{enumerable:!0,get:function(){return t.tBankInternalDomains}})}(gr)),gr);var Cr,Or,Mr=function(){if(jr)return wr;jr=1;var e=function(){if(Sr)return br;Sr=1;var e=/([a-z])([A-Z])/g,t=/[^a-zA-Z]+/g;return br=function(r){return r.replace(e,(function(e,t,r){return t+" "+r})).split(t)}}(),t=kr?_r:(kr=1,_r=function(e){return""+e.charAt(0).toUpperCase()+e.slice(1)});return wr=function(r){return e(r).map((function(e,r){return 0===r?e.toLowerCase():t(e.toLowerCase())})).join("")}}(),Er=ur();function Dr(){if(Or)return Cr;Or=1;var e=Xt();return Cr=e(2,(function(e,t){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}))}var Rr,Ar={},Tr={get exports(){return Ar},set exports(e){Ar=e}},xr={};var Ir,Ur,Lr,Hr,qr,Br,Nr,$r,zr,Qr,Vr,Fr,Jr={};function Wr(){return Ur||(Ur=1,Tr.exports="production"===process.env.NODE_ENV?function(){if(Rr)return xr;Rr=1;var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,l=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,f=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,h=e?Symbol.for("react.block"):60121,m=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,y=e?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var f=e.$$typeof;switch(f){case t:switch(e=e.type){case u:case c:case n:case i:case o:case d:return e;default:switch(e=e&&e.$$typeof){case s:case l:case v:case p:case a:return e;default:return f}}case r:return f}}}function S(e){return b(e)===c}return xr.AsyncMode=u,xr.ConcurrentMode=c,xr.ContextConsumer=s,xr.ContextProvider=a,xr.Element=t,xr.ForwardRef=l,xr.Fragment=n,xr.Lazy=v,xr.Memo=p,xr.Portal=r,xr.Profiler=i,xr.StrictMode=o,xr.Suspense=d,xr.isAsyncMode=function(e){return S(e)||b(e)===u},xr.isConcurrentMode=S,xr.isContextConsumer=function(e){return b(e)===s},xr.isContextProvider=function(e){return b(e)===a},xr.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},xr.isForwardRef=function(e){return b(e)===l},xr.isFragment=function(e){return b(e)===n},xr.isLazy=function(e){return b(e)===v},xr.isMemo=function(e){return b(e)===p},xr.isPortal=function(e){return b(e)===r},xr.isProfiler=function(e){return b(e)===i},xr.isStrictMode=function(e){return b(e)===o},xr.isSuspense=function(e){return b(e)===d},xr.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===c||e===i||e===o||e===d||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===p||e.$$typeof===a||e.$$typeof===s||e.$$typeof===l||e.$$typeof===m||e.$$typeof===g||e.$$typeof===y||e.$$typeof===h)},xr.typeOf=b,xr}():(Ir||(Ir=1,"production"!==process.env.NODE_ENV&&function(){var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,l=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,f=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,h=e?Symbol.for("react.block"):60121,m=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,y=e?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var f=e.$$typeof;switch(f){case t:var h=e.type;switch(h){case u:case c:case n:case i:case o:case d:return h;default:var m=h&&h.$$typeof;switch(m){case s:case l:case v:case p:case a:return m;default:return f}}case r:return f}}}var S=c,_=s,k=a,w=t,j=l,P=n,C=v,O=p,M=r,E=i,D=o,R=d,A=!1;function T(e){return b(e)===c}Jr.AsyncMode=u,Jr.ConcurrentMode=S,Jr.ContextConsumer=_,Jr.ContextProvider=k,Jr.Element=w,Jr.ForwardRef=j,Jr.Fragment=P,Jr.Lazy=C,Jr.Memo=O,Jr.Portal=M,Jr.Profiler=E,Jr.StrictMode=D,Jr.Suspense=R,Jr.isAsyncMode=function(e){return A||(A=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),T(e)||b(e)===u},Jr.isConcurrentMode=T,Jr.isContextConsumer=function(e){return b(e)===s},Jr.isContextProvider=function(e){return b(e)===a},Jr.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},Jr.isForwardRef=function(e){return b(e)===l},Jr.isFragment=function(e){return b(e)===n},Jr.isLazy=function(e){return b(e)===v},Jr.isMemo=function(e){return b(e)===p},Jr.isPortal=function(e){return b(e)===r},Jr.isProfiler=function(e){return b(e)===i},Jr.isStrictMode=function(e){return b(e)===o},Jr.isSuspense=function(e){return b(e)===d},Jr.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===c||e===i||e===o||e===d||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===p||e.$$typeof===a||e.$$typeof===s||e.$$typeof===l||e.$$typeof===m||e.$$typeof===g||e.$$typeof===y||e.$$typeof===h)},Jr.typeOf=b}()),Jr)),Ar}function Gr(){if($r)return Nr;$r=1;var e=function(){if(Hr)return Lr;Hr=1;var e,t=Dr();try{e=Wr().isElement}catch(e){}return e||(e=function(e){return!!e&&t("$$typeof",e)}),Lr=e}(),t=function(){if(Br)return qr;Br=1;var e,t=Dr();try{e=Wr().isValidElementType}catch(e){}return e||(e=function(e){return"string"==typeof e||"function"==typeof e||!!e&&t("$$typeof",e)}),qr=e}(),r=He();return Nr=function(n){if(!r(n))return!1;var o=Object.getPrototypeOf(n);if(null===o)return!0;if(o!==Object.prototype)return!1;if(e(n)||t(n))return!1;return!0}}function Xr(){if(Qr)return zr;Qr=1;var e=Le();return zr=function(){for(var t=arguments.length,r=new Array(t),n=0;t>n;n++)r[n]=arguments[n];return e(r[0])?Object.assign.apply(Object,[[]].concat(r)):Object.assign.apply(Object,[{}].concat(r))},zr}var Zr=function(){if(Fr)return Vr;Fr=1;var e=Xt(),t=Gr(),r=ht(),n=Xr();return Vr=e(2,(function e(){for(var o=n((arguments.length>0?arguments[0]:void 0)||{}),i=1;arguments.length>i;i++){var a=0>i||i>=arguments.length?void 0:arguments[i];if(a)for(var s=r(a),u=0;s.length>u;u++){var c=s[u],l=a[c],d=o[c];o[c]=t(d)&&t(l)?e(d,l):l}}return o})),Vr}(),Yr=function(e,t){return(Yr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function Kr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Yr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var en=function(){return(en=Object.assign||function(e){for(var t,r=1,n=arguments.length;n>r;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function tn(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))}function rn(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&o[3]>i[1])){a.label=i[1];break}if(6===i[0]&&o[1]>a.label){a.label=o[1],o=i;break}if(o&&o[2]>a.label){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function nn(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;i>o;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||t)}var on=function(){var e=0;return function(){return{clientEventTimestamp:Date.now(),clientUploadTimestamp:Date.now(),sequence:++e,uuid:me()}}},an={sessionId:{name:"vIdUid",category:Ft.CookieCategoryBit.Essential,expires:15768e4,subdomains:!0},wuid:{name:"__P__wuid",category:Ft.CookieCategoryBit.Essential,expires:15768e4,subdomains:!0},deviceId:{name:"stDeIdU",category:Ft.CookieCategoryBit.Essential,expires:15768e4,subdomains:!0},lastEventTime:{name:"stLaEvTi",category:Ft.CookieCategoryBit.Essential,expires:15768e4,subdomains:!0},sessionStartTime:{name:"stSeStTi",category:Ft.CookieCategoryBit.Essential,expires:15768e4,subdomains:!0}},sn=function(){return Ft.w.statistQueue=Ft.w.statistQueue||[],Ft.w.statistQueue};function un(){var e=mr.parseUrl(Ft.w.location.href);return Ft.resolvePageUrl(e)}var cn=function(){function e(){this.listeners=Object.create(null)}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter((function(e){return e!==t})))},e.prototype.emit=function(e){for(var t=[],r=1;arguments.length>r;r++)t[r-1]=arguments[r];var n=this.listeners[e];if(n)for(var o=0,i=n;i.length>o;o++){i[o].apply(void 0,t)}},e}(),ln=Ft.makeCookiesPubl(new mr.CookieStorage(Ft.cookiesLimits),Ft.makeUserConsentVault()),dn=/^[0-9a-f]{32}$/,fn=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/,pn=function(e){var t;if((t="cookies"===e.from?ln.get(an.wuid.name):new URLSearchParams(Ft.w.location.search).get("wuid"))&&function(e){return dn.test(e)||fn.test(e)}(t))return t},vn=function(e){return"function"==typeof e?e():e},hn={test:atob("aHR0cHM6Ly9hcGktc3RhdGlzdC5kZXYtdGNzZ3JvdXAuaW8="),prod:"https://api-statist.tinkoff.ru"},mn=function(e){try{return Ft.w.localStorage.getItem(e)}catch(e){return null}},gn=function(){var e=mn("__statist_saved_messages");if(null===e)return[];try{return JSON.parse(e)}catch(e){return[]}},yn=function(){return function(e){try{return Ft.w.localStorage.removeItem("__statist_saved_messages"),!0}catch(e){return!1}}()},bn=function(){function e(e,t){var r,n=this;this.timer=null,this.eventEmitter=new cn,this.destroy=function(){Ft.d.removeEventListener("visibilitychange",n.handleVisibilityChange),Ft.w.removeEventListener("pagehide",n.handlePageHide)},this.handleVisibilityChange=function(){"hidden"===Ft.d.visibilityState?n.sendByBeacon():n.processSavedMessages()},this.handlePageHide=function(){n.sendByBeacon()},this.pushEventsUrl="".concat(e,"/gateway/v1/events"),this.batchSize=t.batchSize,this.pushInterval=t.pushInterval,this.pushTimeout=null!==(r=t.pushTimeout)&&void 0!==r?r:t.pushInterval,this.savedMessagesSize=t.savedMessagesSize,this.eventsJsonSizeLimit=t.eventsJsonSizeLimit,this.gzipDisabled=!("true"===mn("_statist_enable_gzip")),"visibilityState"in Ft.d&&Ft.d.addEventListener("visibilitychange",this.handleVisibilityChange,!1),Ft.w.addEventListener("pagehide",this.handlePageHide,!1),this.events=this.excludeOutdatedMessages(gn()),this.sequence=this.getMaxSequence(this.events),this.events.length>0&&(yn(),this.startPush())}return e.prototype.handleApiError=function(e){var t,r,n=this;if(200>e.status||e.status>=500)return this.saveMessages(e.events),void this.startPush();if(e.response)try{var o=JSON.parse(e.response);if(o.message&&(null===(t=o.details)||void 0===t?void 0:t.errors))return void o.details.errors.forEach((function(t){t&&n.eventEmitter.emit("error",Object.assign(new Error(o.message),{status:e.status,response:t}))}))}catch(e){}this.eventEmitter.emit("error",Object.assign(new Error(null!==(r=e.response)&&void 0!==r?r:e.message),{status:e.status}))},e.prototype.saveMessages=function(e){if(0===e.length)return!0;var t=nn(nn([],gn(),!0),e,!0);t.length>this.savedMessagesSize&&t.splice(0,t.length-this.savedMessagesSize);return function(e){try{return function(e,t){try{return Ft.w.localStorage.setItem("__statist_saved_messages",t),!0}catch(e){return!1}}(0,JSON.stringify(e))}catch(e){return!1}}(t)},e.prototype.excludeOutdatedMessages=function(e){var t=Date.now();return e.filter((function(e){return 5184e6>t-e.eventParameters.clientEventTimestamp}))},e.prototype.processSavedMessages=function(){this.events=nn(nn([],gn(),!0),this.events,!0),this.events.length>0&&(yn(),this.sequence=this.getMaxSequence(this.events),this.startPush())},e.prototype.getEventsJsonSize=function(){var e=JSON.stringify(this.events);return new Blob([e]).size},e.prototype.on=function(e,t){this.eventEmitter.on(e,t)},e.prototype.off=function(e,t){this.eventEmitter.off(e,t)},e.prototype.startPush=function(){var e=this;if(0!==this.events.length){var t=function(t){return(e.isReady()?e.pushEvents(t):Promise.resolve()).then((function(){e.timer=null,e.startPush()}),(function(t){e.timer=null,e.handleApiError(t)}))};this.getEventsJsonSize()<this.eventsJsonSizeLimit?this.timer||(this.timer=setTimeout((function(){return t(e.batchSize)}),this.pushInterval)):t(this.events.length)}},e.prototype.pushEvents=function(e){return tn(this,void 0,void 0,(function(){var t;return rn(this,(function(r){return t=this.events.splice(0,e),[2,this.sendByXhr(t)]}))}))},e.prototype.updateTimestamp=function(e){for(var t=Date.now(),r=0,n=e;n.length>r;r++)n[r].eventParameters.clientUploadTimestamp=t},e.prototype.updateSequence=function(e){e.eventParameters.sequence=++this.sequence},e.prototype.getMaxSequence=function(e){var t=0;return e.forEach((function(e){var r=e.eventParameters.sequence;r>t&&(t=r)})),t},e.prototype.sendByXhr=function(e){var t=this;return Ft.Xhr?e.length?(this.updateTimestamp(e),new Promise((function(r,n){var o=new Ft.Xhr,i=function(){if(o.status<200||204<o.status){var t=Object.assign(new Error(o.responseText),{status:o.status,response:o.responseText,events:e});n(t)}else r()};o.onerror=i,o.onload=i,o.ontimeout=i,o.timeout=t.pushTimeout;var a=JSON.stringify(e);t.gzipDisabled?t.sendEventsJSON(a,o):t.sendEventsGZip(a,o)}))):Promise.resolve():Promise.reject()},e.prototype.sendEventsJSON=function(e,t){t.open("POST",this.pushEventsUrl,!0),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send(e)},e.prototype.sendEventsGZip=function(e,t){var r=this;(function(e){return tn(void 0,void 0,void 0,(function(){return rn(this,(function(t){return[2,Promise.resolve().then((function(){return new Blob([e],{type:"application/json"}).stream().pipeThrough(new Ft.w.CompressionStream("gzip"))})).then((function(e){return new Response(e)})).then((function(e){return e.blob()}))]}))}))})(e).then((function(e){try{t.open("POST",r.pushEventsUrl,!0),t.setRequestHeader("Content-Type","application/gzip"),t.setRequestHeader("Content-Encoding","gzip"),t.send(e)}catch(e){}})).catch((function(){r.sendEventsJSON(e,t)}))},e.prototype.sendByBeacon=function(){var e=this.events;this.events=[],e.length&&(Ft.n.onLine?(this.updateTimestamp(e),Ft.n.sendBeacon(this.pushEventsUrl,JSON.stringify(e))||this.saveMessages(e)):this.saveMessages(e))},e.prototype.forceSend=function(){this.sendByBeacon()},e.prototype.send=function(e){this.updateSequence(e),this.events.push(e),this.startPush()},e.prototype.isReady=function(){return!0},e}(),Sn=function(e){console.error(e)},_n=function(){function e(e,t,r,n){void 0===n&&(n=18e5),this.clientParameters=e,this.transport=t,this.eventParameters=r,this.sessionTimeout=n,this.deviceId=function(){var e,t=pn({from:"query"}),r=pn({from:"cookies"});if(t){e=t;var n="true"===new URLSearchParams(Ft.w.location.search).get("iswebview");r&&!n||ln.set(an.wuid,e)}else e=r;return e||(e=function(e){var t="";if("undefined"!=typeof crypto){var r=Math.ceil(16),n=new Uint8Array(r);crypto.getRandomValues(n),n.forEach((function(e){t+=e.toString(16).padStart(2,"0")}))}else for(var o=0;32>o;o++)t+="0123456789abcdef".charAt(Math.floor(16*Math.random()));return t.substring(0,32)}(),ln.set(an.wuid,e)),function(e){ln.get(an.deviceId.name)!==e&&ln.set(an.deviceId,e)}(e),e}(),this.screenWidth=Ft.w.screen.width,this.screenHeight=Ft.w.screen.height,this.codegenVersion="",this.eventEmitter=new cn,this.eventEmitter.on("message",(function(e){var t;!function(e){var t=sn();t.history||(t.history=[]),t.history.length>=1e3||t.history.push(e)}(e),(t=sn(),t.listeners||(t.listeners=[]),t.listeners).forEach((function(t){try{t(e)}catch(e){Sn(e)}}))}));var o,i,a=this.processStatistQueue.bind(this);o=a,(i=sn()).handlerApplied||(i.handlerApplied=!0,i.forEach((function(e){return o(e)})),i.length=0,i.push=function(){for(var e=[],t=0;arguments.length>t;t++)e[t]=arguments[t];return e.forEach((function(e){return o(e)})),0})}return e.prototype.processStatistQueue=function(e){try{if(!e||!Array.isArray(e))return;var t=e;switch(t[0]){case"send":var r=t.slice(1);return void this.send.apply(this,r);case"updateUserProperties":return r=t.slice(1),void this.updateUserProperties.apply(this,r);case"updateFeatureFlags":return r=t.slice(1),void this.updateFeatureFlags.apply(this,r);case"updateABGroups":return r=t.slice(1),void this.updateABGroups.apply(this,r);case"getMessagesHistory":return void(0,t[1])((n=sn(),n.history||(n.history=[]),n.history));case"onMessage":!function(e){var t=sn();t.listeners||(t.listeners=[]),t.listeners.push(e)}(t[1])}}catch(e){Sn(e)}var n},e.createTransport=function(e){var t=e.transportOptions||{},r=t.batchSize,n=void 0===r?100:r,o=t.pushInterval,i=void 0===o?5e3:o,a=t.pushTimeout,s=void 0===a?3e4:a,u=t.savedMessagesSize,c=void 0===u?1e3:u,l=t.eventsJsonSizeLimit,d=void 0===l?32e3:l,f=t.endpointUrl,p=void 0===f?hn[e.environment||"prod"]:f,v=t.gzip,h=void 0===v||v,m=Ft.g._statistTransports||(Ft.g._statistTransports={});Ft.g._statistTransport&&!m[hn.prod]&&(m[hn.prod]=Ft.g._statistTransport),Ft.g._statistDevTransport&&!m[hn.test]&&(m[hn.test]=Ft.g._statistDevTransport);var g=m[p];if(g)return g;var y=new bn(p,{batchSize:n,pushInterval:i,pushTimeout:s,preconnect:!1,savedMessagesSize:c,eventsJsonSizeLimit:d,gzip:h});return m[p]=y,p===hn.prod?Ft.g._statistTransport=y:p===hn.test&&(Ft.g._statistDevTransport=y),y},e.prototype.getSessionId=function(){var e=ln.get(an.sessionId.name),t=Number(ln.get(an.lastEventTime.name))||null;if(null!==e&&null!==t&&Date.now()-t<this.sessionTimeout)return e;var r=ye();return ln.set(an.sessionId,r),ln.remove(an.lastEventTime.name),ln.remove(an.sessionStartTime.name),r},e.prototype.getSessionStartTime=function(){return null===ln.get(an.sessionStartTime.name)?Date.now():Number(ln.get(an.sessionStartTime.name))},e.prototype.resolveClientParameters=function(e){return en(en({},null!=e?e:this.clientParameters),{sessionId:this.getSessionId(),deviceId:this.deviceId,sessionStartTime:this.getSessionStartTime(),screenWidth:this.screenWidth,screenHeight:this.screenHeight,sdkVersion:"0.4.91",codegenVersion:this.codegenVersion})},e.prototype.resolveFullClientParameters=function(e){var t,r=(t=Er.parseUrl(Ft.w.location.href),mr.resolvePreviousPage({location:t,referrer:mr.referrer(),internalDomains:Pr.tBankInternalDomains}));return en(en(en(en({},this.resolveClientParameters(e)),function(){var e=mr.parseUrl(Ft.w.location.href),t=Ft.resolveReferrer({referrer:mr.referrer(),locationHostname:e.hostname});return function(e){return["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].reduce((function(t,r){var n,o=e[r];return o&&(t[(n=r,Mr(n))]=o),t}),{})}(Ft.resolveUtmMarkers({cookies:Ft.makeCookiesPubl(new mr.SafeCookieStorage(Ft.cookiesLimits),Ft.makeUserConsentVault()),location:e,referrer:t,parseUrl:mr.parseUrl,internalDomains:Pr.tBankInternalDomains}).utmMarkers)}()),r&&{referrer:r}),{pageUrl:un()})},e.prototype.transportSend=function(e){this.transport.send(e),ln.set(an.lastEventTime,Date.now()),null===ln.get(an.sessionStartTime.name)&&ln.set(an.sessionStartTime,e.clientParameters.sessionStartTime)},e.prototype.sendUserProperties=function(e,t,r,n){var o,i,a=((o={kind:"userProperties",project:e,eventParameters:vn(this.eventParameters),clientParameters:this.resolveClientParameters()})[r]=((i={})["$".concat(t)]=n,i),o);this.transportSend(a),this.eventEmitter.emit("message",{type:"userProperties",message:a})},e.prototype.send=function(e,t,r,n){var o={project:e,name:t,parameters:r,eventParameters:vn(this.eventParameters),clientParameters:this.resolveFullClientParameters(n)};this.transportSend(o),this.eventEmitter.emit("message",{type:"event",message:o})},e.prototype.updateClientParameters=function(e){for(var t in e)this.clientParameters[t]=e[t]},e.prototype.updateUserProperties=function(e,t,r){this.sendUserProperties(e,t,"userProperties",null!=r?r:{})},e.prototype.updateFeatureFlags=function(e,t){this.sendUserProperties(e,"set","featureFlags",null!=t?t:{})},e.prototype.updateABGroups=function(e,t){this.sendUserProperties(e,"set","ABGroups",null!=t?t:{})},e.prototype.on=function(e,t){"message"===e?this.eventEmitter.on(e,t):this.transport.on(e,t)},e.prototype.off=function(e,t){"message"===e?this.eventEmitter.off(e,t):this.transport.off(e,t)},e.prototype.forceSend=function(){var e,t;null===(t=(e=this.transport).forceSend)||void 0===t||t.call(e)},e.prototype.enrichFork=function(e){void 0===e&&(e={});var t=this.send.bind(this),r=Object.create(this);return r.send=function(r,n,o,i){return t(r,n,function(e,t){if(!t)return e;var r="function"==typeof t?t():t,n=Object.keys(r).reduce((function(e,t){var n=r[t];return e[t]="function"==typeof n?n():n,e}),{});return Object.assign(n,e||{})}(o,e.parameters),i)},r},e.prototype._setCodegenVersion=function(e){this.codegenVersion=e},e}(),kn=function(e){return Ft.g._statistClientInitOptions?Zr(e,Ft.g._statistClientInitOptions):e},wn=function(e){function t(t){var r=kn(t);return e.call(this,r.clientParameters,_n.createTransport(r),r.eventParameters||on(),r.sessionTimeout)||this}return Kr(t,e),t.prototype.send=function(t,r,n,o){return e.prototype.send.call(this,t,r,n||{},o)},t}(_n);!function(e){function t(t){var r=kn(t);return e.call(this,r.clientParameters,_n.createTransport(t),r.eventParameters||on(),r.sessionTimeout)||this}Kr(t,e),t.prototype.send=function(t,r,n,o){return e.prototype.send.call(this,t,r,n,o)}}(_n);var jn,Pn={};var Cn,On,Mn=(jn||(jn=1,Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.getTracking=void 0,Pn.getTracking=function(){if("undefined"==typeof window)throw new Error("EClientOnly");return new Promise((function(e){var t=window.tracking;t&&t.fullfill?t.trackingReady?t.trackingReady().then(e):e(t):window.addEventListener("tracking-created",(function(t){t instanceof CustomEvent&&e(t.detail||window.tracking)}))}))}),Pn);var En=(On||(On=1,Cn=function(e){var t,r=!1;return function(){return r||(t=e.apply(void 0,arguments),r=!0),t}}),Cn);const Dn=En((()=>{var e;let t;if(document.currentScript){t=new URL((null===(e=document.currentScript)||void 0===e?void 0:e.getAttribute("src"))||"").searchParams}return t}));new RegExp(`[${Object.keys({"<":"\\u003C","\u2028":"\\u2028","\u2029":"\\u2029"}).join("")}]`,"g");const Rn=(e,t,r)=>{try{return JSON.stringify(e,t,r)}catch(n){return((e,t,r)=>{const n=new Set,o=t||(e=>e);return JSON.stringify(e,((e,t)=>t&&"object"==typeof t?n.has(t)?"[~Circular~]":(n.add(t),o(t)):o(t)),r)})(e,t,r)}};var An,Tn;!function(){if(Tn)return An;Tn=1;var e=Xt();An=e(3,(function(e,t,r){void 0===r&&(r=[]);for(var n=r.length,o=0;n>o;o++)t=e(t,r[o],o,r);return t}))}();const xn=(e,t)=>t instanceof Error?Object.assign({message:t.message,stack:t.stack},t):t;class In{constructor(e,t="all"){this.log=(e,t)=>{window.logger[this.loggerStorageName][e](Object.assign(Object.assign({},t),{name:this.loggerName}))},this.info=e=>this.log("info",e),this.warn=e=>this.log("warn",e),this.error=e=>this.log("error",e),this.fatal=e=>this.log("fatal",e),this.trace=e=>this.log("trace",e),this.debug=e=>this.log("dedug",e),this.loggerName=t,this.loggerStorageName=Mr(t),window.logger||(window.logger={}),window.logger[this.loggerStorageName]=e}}const Un=(()=>{const e=Object.create(null);return{useEvent:({project:t,event:r})=>{e[t]||(e[t]=Object.create(null)),e[t][r]=!0},getUsedEvents:()=>Object.keys(e).map((t=>({projectName:t,eventList:Object.keys(e[t])})))}})();window.addEventListener("beforeunload",(()=>{const e=Un.getUsedEvents();e.length&&e.forEach((({projectName:e,eventList:t})=>{Vn.sendOnce({project:"eventea",event:"usage-stats",payload:{projectName:e,eventList:t}},e)}))}));const Ln=(()=>{const e=new Set,t=Dn();if(t)for(const[r,n]of t)"project"===r&&e.add(n);return[...e]})(),Hn=new J.ClientLoader({preloadProjects:Ln,baseUrl:"https://cdn.tbank.ru/eventea/"}),qn=new class{constructor(e){this.sendLog=({logApi:e,payload:t})=>fetch(`${e}collect`,{method:"POST",keepalive:!0,headers:{"Content-type":"application/json"},body:Rn(t,xn)}).catch((e=>e)),this.send=e=>{this.sendLog({logApi:this.apiURL,payload:e})},this.log=(e,t)=>{this.send(Object.assign(Object.assign({},t),{level:e}))},this.error=e=>this.log("error",e),this.info=e=>this.log("info",e),this.warn=e=>this.log("warn",e),this.fatal=e=>this.log("fatal",e),this.debug=e=>this.log("debug",e),this.trace=e=>this.log("trace",e),this.apiURL=e}}("https://www.tbank.ru/api/front/log/"),Bn=new In(qn,"eventea-logger-tracking"),Nn=new In(qn,"eventea-error-handlers"),$n=new In(qn,"eventea-logger"),zn=new wn((()=>{const e=Dn(),t={clientParameters:{ssoId:null}},r=null==e?void 0:e.get("statist-environment");r&&(t.environment=r);const n=null==e?void 0:e.get("statist-client");n&&(t.clientParameters.client=n);const o=null==e?void 0:e.get("statist-client-version");return o&&(t.clientParameters.clientVersion=o),t})()),Qn={projectConfigurationMap:{},errorHandlers:(({logger:e})=>({handleMissedEvent:({event:t,project:r})=>{e.error({event:"eventea-missed-event",project:r,eventName:t})},handleMissedEventHandler:({event:t,routeHandlerName:r,project:n})=>{e.error({event:"eventea-missed-event-handler",eventName:t,project:n,routeHandlerName:r})},handleMissedProject:({event:t,project:r})=>{e.error({event:"eventea-missed-project",project:r,eventName:t})},handleMissedRouting:({project:t})=>{e.error({event:"eventea-missed-routing",project:t})},handleMissedDataHandler:({project:t,handlerName:r})=>{e.error({event:"eventea-missed-data-handler",project:t,handlerName:r})},handleMissedDataProject:({project:t})=>{e.error({event:"eventea-missed-data-project",project:t})},handleMissedRoutes:({project:t,event:r})=>{e.error({event:"eventea-missed-routes",project:t,eventName:r})},handleDeprecatedEvent:({project:t,event:r})=>{e.info({event:"eventea-deprecated-event",project:t,eventName:r})},handleEventHandlerError:(t,r,{project:n,event:o})=>{e.error({event:"eventea-handler-error",project:n,eventName:o,handlerName:r,error:t})}}))({logger:Nn}),routingClientLoader:Hn,beerBaseUrl:"https://www.tbank.ru/api/front/eventea-beer/",handleAnyEvent:e=>{Un.useEvent(e)},defaultEventHandlers:{statist:ce.statistHandlerFactory({statistClient:zn}),tracking:(({logger:e})=>{const t=En((()=>((e=6e3)=>Promise.race([Mn.getTracking(),new Promise(((t,r)=>setTimeout((()=>r(new Error(`No tracking after ${e}ms timeout`))),e)))]))().then((e=>e.callUtil("makeEventeaHandler"))).catch((t=>(e.error({event:"Unable to resolve makeEventeaHandler.",error:t}),null)))));return e=>{t().then((t=>{null==t||t(e)}))}})({logger:Bn}),logs:(({logger:e})=>t=>{var{project:r,event:n,payload:o,handlersData:i}=t,a=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);n.length>o;o++)0>t.indexOf(n[o])&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(t,["project","event","payload","handlersData"]);const s=null==a?void 0:a.config,u=(()=>{const e=Dn();let t="unknown";if(e)for(const[r,n]of e)if("appName"===r){t=n;break}return t})();if(s){const{level:t,samplingRate:a=1}=s;if(W[t]&&t in e){if(0===(c=a)||1===c?c:Math.random()<=c){const a=i?Object.assign(Object.assign({},i),{statist:void 0}):i;e[t]({event:n,eventeaProject:r,payload:o,appName:u,handlersData:a,from:"browser",userAgent:window.navigator.userAgent,href:window.location.href})}return}e.error({event:"eventea-wrong-logs-config",originalEvent:n,originalLevel:t})}var c})({logger:$n})}},Vn=new A.RootEventea(Qn);"undefined"!=typeof window&&(window.eventea=Vn,window.eventeaStatist=zn,window.__eventea=Vn)}();
