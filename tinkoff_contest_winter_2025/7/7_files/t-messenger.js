(()=>{"use strict";var e={4134:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.locationWithQuery=t.referrer=t.parseUrl=t.SafeCookieStorage=t.CookieStorage=t.cookieStorage=t.resolvePreviousPage=void 0;var s=n(6274);Object.defineProperty(t,"resolvePreviousPage",{enumerable:!0,get:function(){return s.resolvePreviousPage}});var i=n(5340);Object.defineProperty(t,"cookieStorage",{enumerable:!0,get:function(){return i.cookieStorage}}),Object.defineProperty(t,"CookieStorage",{enumerable:!0,get:function(){return i.CookieStorage}});var r=n(8490);Object.defineProperty(t,"SafeCookieStorage",{enumerable:!0,get:function(){return r.SafeCookieStorage}});var o=n(1445);Object.defineProperty(t,"parseUrl",{enumerable:!0,get:function(){return o.parseUrl}});var a=n(8446);Object.defineProperty(t,"referrer",{enumerable:!0,get:function(){return a.referrer}});var c=n(8964);Object.defineProperty(t,"locationWithQuery",{enumerable:!0,get:function(){return c.locationWithQuery}})},7782:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataConsentBit=t.CookieCategoryBit=t.isExternalNavigation=t.removeQueryParams=t.parseQuery=t.extractDomain=t.makeUserConsentVault=t.makeCookiesPubl=t.checkCookieLimit=t.Xhr=t.d=t.n=t.w=t.g=t.cookiesLimits=t.utmCookiesLimits=t.internalMarkers=t.consentCategories=t.utmCookies=t.contextCookies=t.contextMarkersCookies=t.utmMarkersCookies=t.resolveUtmMarkers=t.resolveReferrer=t.resolvePageUrl=void 0;var s=n(4663);Object.defineProperty(t,"resolvePageUrl",{enumerable:!0,get:function(){return s.resolvePageUrl}});var i=n(1996);Object.defineProperty(t,"resolveReferrer",{enumerable:!0,get:function(){return i.resolveReferrer}});var r=n(2856);Object.defineProperty(t,"resolveUtmMarkers",{enumerable:!0,get:function(){return r.resolveUtmMarkers}}),Object.defineProperty(t,"utmMarkersCookies",{enumerable:!0,get:function(){return r.utmMarkersCookies}}),Object.defineProperty(t,"contextMarkersCookies",{enumerable:!0,get:function(){return r.contextMarkersCookies}});var o=n(1400);Object.defineProperty(t,"contextCookies",{enumerable:!0,get:function(){return o.contextCookies}}),Object.defineProperty(t,"utmCookies",{enumerable:!0,get:function(){return o.utmCookies}});var a=n(7321);Object.defineProperty(t,"consentCategories",{enumerable:!0,get:function(){return a.consentCategories}}),Object.defineProperty(t,"internalMarkers",{enumerable:!0,get:function(){return a.internalMarkers}});var c=n(8800);Object.defineProperty(t,"utmCookiesLimits",{enumerable:!0,get:function(){return c.utmCookiesLimits}}),Object.defineProperty(t,"cookiesLimits",{enumerable:!0,get:function(){return c.cookiesLimits}});var l=n(61);Object.defineProperty(t,"g",{enumerable:!0,get:function(){return l.g}}),Object.defineProperty(t,"w",{enumerable:!0,get:function(){return l.w}}),Object.defineProperty(t,"n",{enumerable:!0,get:function(){return l.n}}),Object.defineProperty(t,"d",{enumerable:!0,get:function(){return l.d}}),Object.defineProperty(t,"Xhr",{enumerable:!0,get:function(){return l.Xhr}});var u=n(3825);Object.defineProperty(t,"checkCookieLimit",{enumerable:!0,get:function(){return u.checkCookieLimit}});var d=n(1069);Object.defineProperty(t,"makeCookiesPubl",{enumerable:!0,get:function(){return d.makeCookiesPubl}});var m=n(7558);Object.defineProperty(t,"makeUserConsentVault",{enumerable:!0,get:function(){return m.makeUserConsentVault}});var g=n(8876);Object.defineProperty(t,"extractDomain",{enumerable:!0,get:function(){return g.extractDomain}});var p=n(3627);Object.defineProperty(t,"parseQuery",{enumerable:!0,get:function(){return p.parseQuery}}),Object.defineProperty(t,"removeQueryParams",{enumerable:!0,get:function(){return p.removeQueryParams}});var h=n(453);Object.defineProperty(t,"isExternalNavigation",{enumerable:!0,get:function(){return h.isExternalNavigation}});var f=n(5745);Object.defineProperty(t,"CookieCategoryBit",{enumerable:!0,get:function(){return f.CookieCategoryBit}}),Object.defineProperty(t,"DataConsentBit",{enumerable:!0,get:function(){return f.DataConsentBit}})},9080:(e,t,n)=>{t.x=void 0;var s=n(3286);Object.defineProperty(t,"x",{enumerable:!0,get:function(){return s.tBankInternalDomains}})},7517:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(4134),t)},7321:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.consentCategories=t.UserConsentAllowAll=t.STRING_DATA_LIMIT=t.SIXTY_DAYS=t.internalMarkers=t.positionPattern=void 0;var s=n(5745);t.positionPattern=/^\d+(0|s|t)\d+$/,t.internalMarkers=["internal_source"],t.SIXTY_DAYS=5184e3,t.STRING_DATA_LIMIT=255,t.UserConsentAllowAll=0xfffffffffffff,t.consentCategories={Essential:s.CookieCategoryBit.Essential,Functionality:s.CookieCategoryBit.Functionality,Statistics:s.CookieCategoryBit.Statistics,Marketing:s.CookieCategoryBit.Marketing,PersonalDataProcessing:s.DataConsentBit.PersonalDataProcessing}},1400:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contextCookies=t.utmCookies=void 0;var s=n(5745),i=n(7321).SIXTY_DAYS,r=s.CookieCategoryBit.Marketing|s.CookieCategoryBit.Statistics,o={utmSource:{name:"utm_source",category:r,expires:i,subdomains:!0},utmContent:{name:"utm_content",category:r,expires:i,subdomains:!0},utmCampaign:{name:"utm_campaign",category:r,expires:i,subdomains:!0},utmMedium:{name:"utm_medium",category:r,expires:i,subdomains:!0},utmTerm:{name:"utm_term",category:r,expires:i,subdomains:!0},utmDateSet:{name:"utm_date_set",category:r,expires:i,subdomains:!0},sid:{name:"sid",category:r,expires:i,subdomains:!0},wm:{name:"wm",category:r,expires:i,subdomains:!0},visitorNewOrReturn:{name:"s_nr",category:r,expires:31536e3,subdomains:!0}};t.utmCookies=o;var a={ctxSource:{name:"ctx_source",category:r,expires:i,subdomains:!0},ctxPosition:{name:"ctx_position",category:r,expires:i,subdomains:!0},ctxBlock:{name:"ctx_block",category:r,expires:i,subdomains:!0}};t.contextCookies=a},8800:function(e,t,n){var s,i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.cookiesLimits=t.utmCookiesLimits=void 0;var r=n(1400);t.utmCookiesLimits=((s={})[r.utmCookies.utmSource.name]=255,s.session_utm_source=255,s[r.utmCookies.utmTerm.name]=600,s[r.utmCookies.utmContent.name]=600,s[r.utmCookies.utmCampaign.name]=255,s[r.utmCookies.utmMedium.name]=255,s[r.utmCookies.sid.name]=140,s[r.utmCookies.wm.name]=100,s),t.cookiesLimits=i(i({},t.utmCookiesLimits),{default:72})},61:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Xhr=t.n=t.w=t.d=t.g=void 0,t.g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0,t.d=t.g.document,t.w=t.g.window,t.n=t.g.navigator,t.Xhr=t.g.XMLHttpRequest},3286:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tBankInternalDomains=void 0,t.tBankInternalDomains=["tinkoff.ru","tinkoffinsurance.ru","dolyame.ru","tbank.ru"]},2381:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7782),t)},6274:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.resolvePreviousPage=void 0;var i=s(n(3342)),r=n(453),o=n(3627),a=n(61);t.resolvePreviousPage=function(e){var t=e.referrer,n=e.location,s=e.internalDomains,c=1===(0,i.default)(["performance","navigation","type"],a.w)?n:t;if(c){var l=c.hostname,u=n.hostname;if(!(0,r.isExternalNavigation)(s,l,u))return(0,o.removeQueryParams)(c.href)}}},4663:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resolvePageUrl=void 0,t.resolvePageUrl=function(e){return e.hostname+e.pathname}},1996:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resolveReferrer=void 0,t.resolveReferrer=function(e){var t=e.referrer,n=e.locationHostname,s="";return t&&t.hostname!==n&&(s=t.hostname),s}},2856:function(e,t,n){var s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveUtmMarkers=t.contextMarkersCookies=t.utmMarkersCookies=void 0;var r,o=i(n(2315)),a=n(7321),c=n(453),l=n(8741),u=n(7381),d=n(6667),m=n(3627),g=n(1400),p=n(7034),h=n(8800);!function(e){e.source="source",e.position="position",e.block="block"}(r||(r={}));var f="session_utm_source";t.utmMarkersCookies=[g.utmCookies.utmSource,g.utmCookies.utmContent,g.utmCookies.utmCampaign,g.utmCookies.utmMedium,g.utmCookies.utmTerm,g.utmCookies.sid,g.utmCookies.wm],t.contextMarkersCookies=[g.contextCookies.ctxPosition,g.contextCookies.ctxBlock,g.contextCookies.ctxSource],t.resolveUtmMarkers=function(e){var n,i,v=e.cookies,b=e.location,y=e.referrer,S=e.parseUrl,C=e.internalDomains,M=t.utmMarkersCookies.map((function(e){return e.name})),k=t.contextMarkersCookies.map((function(e){return e.name})),w=b.query.parent_url,_=w?S(w):void 0,I=b.query.utm_source||!_?b.query:_.query,O=b.hash.replace("#",""),P=O?(0,m.parseQuery)(O):{},T=(0,u.pick)(a.internalMarkers,I),E=(0,u.pick)(M,I),x=(0,u.pick)(M,P),A=(0,o.default)(E)?x:E;function U(e,t){for(var n=0,s=e;n<s.length;n++){var i=s[n],r=t[i.name];r?v.set(i,r):v.remove(i.name,!0)}}function L(e){return(0,u.pick)(e,v.getAll())}function D(){return s({internal_source:""},T)}var j=!1,N=!1;return function(){var e,t,o,u,m;if(A.utm_source)return n=s(s({collectionMethod:"get",cookieDate:Date.now(),utm_source:"",session_utm_source:A.utm_source||""},D()),A),i=function(){var e=I[r.position];if(!(0,l.isString)(e))return{};var t,n={};return a.positionPattern.test(e)?(t=e.split(/\D/),n.ctx_position=t.length>1?t[1]:"",n.ctx_block=t[0]+e.replace(/\d/g,"")):(n.ctx_position=e,n.ctx_block=I[r.block]),n.ctx_source=I[r.source]||"",n}(),void(j=!0);if(t=L(M),o=Number(v.get("utm_date_set"))||null,u=d.safeSessionStorage.getItem(f)||"",m=null,t.utm_source&&(m="cookie"),n=s(s({collectionMethod:m,cookieDate:o,utm_source:"",session_utm_source:u},D()),t),y&&(0,c.isExternalNavigation)(C,b.hostname,y)){var g,p=null===(e=n.utm_source)||void 0===e?void 0:e.includes(".");if(!n.utm_source||p)return n=s({utm_source:g=y,session_utm_source:g,collectionMethod:"referrer",cookieDate:Date.now()},D()),i={},void(j=!0);n.session_utm_source||(n.session_utm_source=y,j=!0,N=!0)}}(),n=(0,p.truncateValuesAndMark)(h.cookiesLimits,n),i=(0,p.truncateValuesAndMark)(h.cookiesLimits,null!=i?i:{}),j&&function(e,n,s){void 0===s&&(s=!1),s||(v.set(g.utmCookies.utmDateSet,e.cookieDate||Date.now()),U(t.utmMarkersCookies,e),U(t.contextMarkersCookies,n||{})),e.session_utm_source&&d.safeSessionStorage.setItem(f,e.session_utm_source)}(n,i,N),i&&(i=L(k)),s(s({},i),{utmMarkers:n})}},8964:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.locationWithQuery=void 0;var s=n(3627),i=n(61);t.locationWithQuery=function(e){void 0===e&&(e=i.d.location);var t={get query(){return(0,s.parseQuery)(e.search.slice(1))},get pathname(){return"/"!==e.pathname.charAt(0)?"/".concat(e.pathname):e.pathname}};return["hash","host","hostname","href","port","protocol","search","origin"].forEach((function(n){Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){"origin"!==n&&(e[n]=t)},enumerable:!0})})),t}},1445:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseUrl=void 0;var s=n(8964),i=n(61);t.parseUrl=function(e){var t=i.d.createElement("a");return t.href=e,(0,s.locationWithQuery)(t)}},8446:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.referrer=void 0;var s=n(1445),i=n(61);t.referrer=function(){return i.d.referrer?(0,s.parseUrl)(i.d.referrer):void 0}},5340:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.cookieStorage=t.CookieStorage=void 0;var i=s(n(4471)),r=n(61),o=n(3825),a=n(8800),c=n(8876),l=function(){function e(e,t){this.limits=e,this.logger=t,this.isCookieAvailable=null,this.hasSamesiteNoneSupport=null,this.localState=Object.create(null)}return e.prototype.get=function(e){return this.checkCookieAvailability()?this.getCookie(e):this.getLocalState(e)},e.prototype.getAll=function(){return this.checkCookieAvailability()?this.getAllCookies():this.getAllLocalState()},e.prototype.set=function(e,t,n,s){this.checkCookieAvailability()&&this.setCookie(e,t,n,s),this.setLocalState(e,t)},e.prototype.remove=function(e,t){this.checkCookieAvailability()?this.removeCookie(e,t):this.removeLocalState(e)},e.prototype.checkCookieAvailability=function(){if(null!=this.isCookieAvailable)return this.isCookieAvailable;if(null==r.d.cookie)return this.isCookieAvailable=!1,this.isCookieAvailable;var e="test_cookie_sqJPwCiceI";r.d.cookie="".concat(e,"=true");var t=this.getCookie(e);return this.isCookieAvailable="true"===t,r.d.cookie="".concat(e,"=; expires=").concat(new Date(0).toUTCString()),this.isCookieAvailable},e.prototype.checkSamesiteNoneSupport=function(){if(null!=this.hasSamesiteNoneSupport)return this.hasSamesiteNoneSupport;if(!this.checkCookieAvailability())return this.hasSamesiteNoneSupport=!1,this.hasSamesiteNoneSupport;var e="test_cookie_yIKsyPp4Fh";r.d.cookie="".concat(e,"=true; samesite=none; secure");var t=this.getCookie(e);return this.hasSamesiteNoneSupport="true"===t,r.d.cookie="".concat(e,"=; expires=").concat(new Date(0).toUTCString()),this.hasSamesiteNoneSupport},e.prototype.getCookie=function(e){var t=this.getRawCookie(e);return t?decodeURIComponent(t):null},e.prototype.getAllCookies=function(){var e=this.getAllRawCookies();return(0,i.default)(e).reduce((function(e,t){var n=t[0],s=t[1];return e[n]=decodeURIComponent(s),e}),{})},e.prototype.setCookie=function(e,t,n,s){var i;void 0===n&&(n="session"),void 0===s&&(s=!1);try{(0,o.checkCookieLimit)(this.limits,e,String(t))}catch(u){return void(null===(i=this.logger)||void 0===i||i.error(u))}var a=[];if(a.push("".concat(e,"=").concat(encodeURIComponent(t)),"path=/","domain=".concat(s?(0,c.extractDomain)(r.w.location.hostname):r.w.location.hostname)),"session"!==n){var l=0===n?new Date(0):new Date(Date.now()+1e3*n);a.push("expires=".concat(l.toUTCString()))}this.checkSamesiteNoneSupport()&&a.push("samesite=none","secure"),r.d.cookie=a.join("; ")},e.prototype.removeCookie=function(e,t){null!==this.getCookie(e)&&this.setCookie(e,"",0,t)},e.prototype.getLocalState=function(e){return this.localState[e]||null},e.prototype.getAllLocalState=function(){return this.localState},e.prototype.setLocalState=function(e,t){return this.localState[e]=t.toString(),t},e.prototype.removeLocalState=function(e){e in this.localState&&delete this.localState[e]},e.prototype.getRawCookie=function(e){return r.d.cookie.split("; ").reduce((function(t,n){var s=n.split("="),i=s[0],r=s[1];return i===e?r:t}),"")||null},e.prototype.getAllRawCookies=function(){return r.d.cookie.split("; ").reduce((function(e,t){var n=t.split("="),s=n[0],i=n[1];return s?(e[s]=i,e):e}),{})},e}();t.CookieStorage=l,t.cookieStorage=new l(a.cookiesLimits)},8490:function(e,t,n){var s,i=this&&this.__extends||(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},s(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.safeCookieStorage=t.SafeCookieStorage=void 0;var r=n(5340),o=n(8800),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.get=function(t){try{return e.prototype.get.call(this,t)}catch(n){return e.prototype.getRawCookie.call(this,t)}},t.prototype.getAll=function(){try{return e.prototype.getAll.call(this)}catch(t){return e.prototype.getAllRawCookies.call(this)}},t}(r.CookieStorage);t.SafeCookieStorage=a,t.safeCookieStorage=new a(o.cookiesLimits)},6667:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.safeSessionStorage=t.safeLocalStorage=t.SafeStorage=void 0;var n=function(){function e(e){this.clear=this.getSafeVersionOfMethod("clear",void 0),this.key=this.getSafeVersionOfMethod("key",null),this.setItem=this.getSafeVersionOfMethod("setItem",void 0),this.getItem=this.getSafeVersionOfMethod("getItem",null),this.removeItem=this.getSafeVersionOfMethod("removeItem",void 0),this.storageType=e}return Object.defineProperty(e.prototype,"length",{get:function(){try{return this.storage.length}catch(e){}return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){if(!this.storageImpl){var e={local:localStorage,session:sessionStorage};this.storageImpl=e[this.storageType]}return this.storageImpl},enumerable:!1,configurable:!0}),e.prototype.getSafeVersionOfMethod=function(e,t){var n=this;return function(){for(var s,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];try{return(s=n.storage)[e].apply(s,i)}catch(o){}return t}},e}();t.SafeStorage=n,t.safeLocalStorage=new n("local"),t.safeSessionStorage=new n("session")},7558:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.makeUserConsentVault=void 0;var i=s(n(6972)),r=n(7321),o=n(5745);t.makeUserConsentVault=function(e){void 0===e&&(e={});var t=e.defaults,n=void 0===t?r.UserConsentAllowAll:t,s=e.alwaysEnabled,a=void 0===s?o.CookieCategoryBit.Essential:s,c=n,l=(0,i.default)();return Object.assign(l,{once:function(e,t){var n=function(){l.off(e,n),t()};l.on(e,n)},isAllowed:function(e){return(this.getAllowedMask()&e)===e},resetAllTo:function(e){c=e,l.emit("update")},update:function(e,t){void 0===t&&(t="keep"),"enable"===t?c|=r.UserConsentAllowAll:"disable"===t&&(c=0);for(var n=0,s=Object.keys(e);n<s.length;n++){var i=s[n],o=Number(i);e[o]?c|=o:c&=~o}l.emit("update")},getAllowedMask:function(){return(null!=c?c:n)|a},categories:r.consentCategories})}},3825:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checkCookieLimit=void 0,t.checkCookieLimit=function(e,t,n){var s=encodeURIComponent(n),i=e[t]||e.default;if(s.length>i)throw new Error("ECookieTooLarge: cookie ".concat(t," exceeds maximum length of ").concat(i," bytes"))}},1069:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeCookiesPubl=void 0,t.makeCookiesPubl=function(e,t){var n={},s=function(t,n){e.set(t.name,n,t.expires,t.subdomains)};return t.on("update",(function(){for(var e=0,i=Object.keys(n);e<i.length;e++){var r=i[e],o=n[r],a=o.cookie,c=o.value;t.isAllowed(a.category)&&(s(a,c),delete n[r])}})),{get:function(t){return e.get(t)},getAll:function(){return e.getAll()},set:function(e,i){var r=t.isAllowed(e.category);return r?s(e,i):n[e.name]={cookie:e,value:i},r},remove:function(t,s){delete n[t],e.remove(t,s)}}}},5745:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataConsentBit=t.CookieCategoryBit=void 0,function(e){e[e.Essential=1]="Essential",e[e.Functionality=2]="Functionality",e[e.Statistics=4]="Statistics",e[e.Marketing=8]="Marketing"}(t.CookieCategoryBit||(t.CookieCategoryBit={})),function(e){e[e.PersonalDataProcessing=16]="PersonalDataProcessing"}(t.DataConsentBit||(t.DataConsentBit={}))},8876:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.extractDomain=void 0;var n=/^(?:::(?:ffff:(0:)?)?)?(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,s=/^([0-9a-fA-F]{1,4}:){1,4}:(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/;t.extractDomain=function(e){return t=e,n.test(t)||s.test(t)?e:e.indexOf("localhost")>=0?"localhost":".".concat(e.split(".").slice(-2).join("."));var t}},453:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isExternalNavigation=void 0,t.isExternalNavigation=function(e,t,n){return void 0===e&&(e=[]),t!==n&&[t,n].some((function(t){return e.every((function(e){return t!==e&&!t.endsWith(".".concat(e))}))}))}},7034:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.truncateValuesAndMark=void 0;var i=s(n(4471)),r=s(n(96)),o=n(7321);function a(e,t){var n=e,s=".cut";n.length>o.STRING_DATA_LIMIT&&(n=function(e,t){return e.slice(0,t)}(n,o.STRING_DATA_LIMIT-4));encodeURIComponent(n).length>t&&(n=function(e,t){var n=0,s=e.length+1;for(;n+1<s;){var i=Math.floor((n+s)/2);encodeURIComponent(e.slice(0,i)).length>t?s=i:n=i}return e.slice(0,n)}(n,t-4));return n===e?e:"".concat(n).concat(s)}t.truncateValuesAndMark=function(e,t){var n=(0,i.default)(t).map((function(t){var n=t[0],s=t[1];return"string"!=typeof s?[n,s]:[n,a(s,n in e?e[n]:e.default)]}));return(0,r.default)(n)}},3627:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeQueryParams=t.parseQuery=void 0,t.parseQuery=function(e,t,n){void 0===t&&(t="&"),void 0===n&&(n="=");for(var s={},i=0,r=e.split(t);i<r.length;i++){var o=r[i],a=String(o).split(n),c=a[0],l=a.slice(1);if(c){var u=l.join(n);try{u=decodeURIComponent(u)}catch(d){}s[decodeURIComponent(c)]=u}}return s},t.removeQueryParams=function(e){return e.split("?")[0]}},7381:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pick=void 0,t.pick=function(e,t){for(var n={},s=0,i=e;s<i.length;s++){var r=i[s];r in t&&(n[r]=t[r])}return n}},8741:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isString=void 0,t.isString=function(e){return"string"==typeof e}},3956:(e,t,n)=>{var s=n(6515);e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s(t[0])?Object.assign.apply(Object,[[]].concat(t)):Object.assign.apply(Object,[{}].concat(t))}},8487:e=>{e.exports=function(e,t){return function n(){for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return i.length>=e?t.apply(this,i):function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return n.apply(this,i.concat(t))}}}},6515:e=>{e.exports=function(e){return!!e&&Array.isArray(e)}},2315:(e,t,n)=>{var s=n(3281),i=n(6515),r=n(6125),o=n(6003);e.exports=function(e){switch(!0){case s(e):return!0;case r(e):return""===e;case i(e):return 0===e.length;case o(e):return 0===Object.keys(e).length}return!1}},3281:e=>{e.exports=function(e){return null==e}},6003:e=>{e.exports=function(e){return null!==e&&"object"==typeof e}},4585:(e,t,n)=>{var s=n(1437),i=n(442),r=n(6003);e.exports=function(e){if(!r(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;if(t!==Object.prototype)return!1;if(s(e)||i(e))return!1;return!0}},442:(e,t,n)=>{var s,i=n(481);try{s=n(524).isValidElementType}catch(r){}s||(s=function(e){return"string"==typeof e||"function"==typeof e||!!e&&i("$$typeof",e)}),e.exports=s},1437:(e,t,n)=>{var s,i=n(481);try{s=n(524).isElement}catch(r){}s||(s=function(e){return!!e&&i("$$typeof",e)}),e.exports=s},6125:e=>{e.exports=function(e){return"string"==typeof e||e instanceof String}},96:e=>{e.exports=function(e){void 0===e&&(e=[]);for(var t={},n=0;n<e.length;n++)t[e[n][0]]=e[n][1];return t}},481:(e,t,n)=>{var s=n(8487);e.exports=s(2,(function(e,t){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}))},2877:(e,t,n)=>{var s=n(6003);e.exports=function(e){return s(e)?Object.keys(e):[]}},4059:(e,t,n)=>{var s=n(8487),i=n(4585),r=n(2877),o=n(3956);e.exports=s(2,(function e(){for(var t=o((arguments.length<=0?void 0:arguments[0])||{}),n=1;n<arguments.length;n++){var s=n<0||arguments.length<=n?void 0:arguments[n];if(s)for(var a=r(s),c=0;c<a.length;c++){var l=a[c],u=s[l],d=t[l];i(d)&&i(u)?t[l]=e(d,u):t[l]=u}}return t}))},3342:(e,t,n)=>{var s=n(8487);e.exports=s(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var n=t,s=0;s<e.length;s++){if(null==n)return;n=n[e[s]]}return n}))},4471:(e,t,n)=>{var s=n(2877);e.exports=function(e){void 0===e&&(e={});for(var t=s(e),n=t.length,i=new Array(n),r=0;r<n;r++)i[r]=[t[r],e[t[r]]];return i}},5154:(e,t,n)=>{var s=n(234),i=n(4173);e.exports=function(e){return s(e).map((function(e,t){return 0===t?e.toLowerCase():i(e.toLowerCase())})).join("")}},4173:e=>{e.exports=function(e){return""+e.charAt(0).toUpperCase()+e.slice(1)}},234:e=>{var t=/([a-z])([A-Z])/g,n=/[^a-zA-Z]+/g;e.exports=function(e){return e.replace(t,(function(e,t,n){return t+" "+n})).split(n)}},6972:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});const s=function(e){return e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t){var n=[].slice.call(arguments,1);(e[t]||[]).map((function(e){e.apply(void 0,n)})),(e["*"]||[]).map((function(e){e.apply(void 0,[t].concat(n))}))}}}},320:(e,t)=>{var n,s=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen");function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case s:switch(e=e.type){case r:case a:case o:case m:case g:return e;default:switch(e=e&&e.$$typeof){case u:case l:case d:case h:case p:case c:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===s},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===a||e===o||e===m||e===g||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===p||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===n||void 0!==e.getModuleId)}},524:(e,t,n)=>{e.exports=n(320)}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e,t,s,i,r,o,a,c,l,u,d,m,g;!function(e){e.InitTmsg="initTmsg",e.OpenMessenger="openMessenger",e.ToggleMessenger="toggleMessenger",e.CloseMessenger="closeMessenger"}(e||(e={})),function(e){e.Sso="sso",e.Webim="webim"}(t||(t={})),function(e){e.Guest="guest",e.Authorized="authorized"}(s||(s={})),function(e){e.OnMessengerFail="ON_MESSENGER_FAIL",e.OnMessengerInited="ON_MESSENGER_INITED",e.OnMessengerClose="ON_MESSENGER_CLOSE",e.OnMessengerOpen="ON_MESSENGER_OPEN",e.OnUnreadIndicatorChanged="ON_UNREAD_INDICATOR_CHANGED",e.OnUnreadMessagesCountChanged="ON_UNREAD_MESSAGES_COUNT_CHANGED",e.OnMessengerUpdateSession="ON_MESSENGER_UPDATE_SESSION",e.OnMessengerScreenChanged="ON_MESSENGER_SCREEN_CHANGED"}(i||(i={})),function(e){e.Conversation="conversation",e.Error="error",e.ConversationsList="conversations-list",e.WelcomeForm="welcome-form",e.ArchiveList="archive-list",e.WidgetLongVersion="widget-long-version",e.DiscussionAbout="discussion-about",e.DiscussionEdit="discussion-edit",e.DiscussionUserEdit="discussion-user-edit",e.ValidationInput="validation-input"}(r||(r={})),function(e){e.Auto="auto",e.Visible="visible",e.Hidden="hidden",e.SingleConversationOnly="singleConversationOnly"}(o||(o={})),function(e){e.IframeInitSuccess="iframeInitSuccess",e.IframeLoad="iframeLoad"}(a||(a={})),function(e){e.Resize="resize",e.ViewportResize="viewportResize"}(c||(c={})),function(e){e.MessengerOpenedStatus="messengerOpenedStatus",e.UpdateCompanyId="update-companyId",e.UpdateLocation="update-location",e.TmsgUserInfo="tmsg-userInfo",e.UpdateApplications="update-applications",e.UpdateUnreadCounter="updateUnreadCounter",e.UpdateUnreadMessagesCount="updateUnreadMessagesCount",e.FocusEvent="focus-event",e.PushNotification="push-notification",e.OpenConversationById="open-conversation-by-id",e.OpenConversationByAppId="open-conversation-by-app-id",e.OpenSupportConversation="open-support-conversation",e.TmsgOpenDraft="tmsg-openDraft",e.PlatformResize="platformResize",e.PlatformViewportResize="platformViewportResize",e.TmsgSendMessage="tmsg-send-message",e.TmsgWidgetTitle="tmsg-widget-title",e.TmsgWidgetSubtitle="tmsg-widget-subtitle",e.TmsgWidgetAvatar="tmsg-widget-avatar",e.TmsgColorConfig="tmsg-color-config",e.TmsgWelcomeFormConfig="tmsg-welcome-form-config",e.TmsgCloseButtonVisibility="tmsg-close-button-visibility",e.TmsgInit="tmsg-init",e.TmsgClose="tmsg-close",e.TmsgUpdateSession="tmsg-update-session",e.TmsgWelcomeFormDisplayStatus="tmsg-welcome-form-display-status",e.TmsgWelcomeFormScreenChanged="tmsg-welcome-form-screen-changed",e.TmsgScreenChanged="tmsg-screen-changed",e.UpdateLocale="tmsg-update-locale",e.TmsgPlatformUserResponse="tmsg-platform-user-response",e.TmsgPlatformUserRequest="tmsg-platform-user-request",e.TmsgUrlResponse="tmsg-url-response",e.TmsgUrlRequest="tmsg-url-request"}(l||(l={})),function(e){e.Notify="NOTIFY",e.RecalculateActiveTab="RECALCULATE_ACTIVE_TAB"}(u||(u={})),function(e){e.Desktop="desktop",e.WebMobile="web_mobile",e.PWA="pwa",e.Unknown="unknown"}(d||(d={})),function(e){e.Name="name",e.Phone="phone",e.Email="email",e.Date="date"}(m||(m={})),function(e){e.First="first",e.Second="second"}(g||(g={}));const p={telegram:"https://business.cdn-tinkoff.ru/static/projects/messenger/icons/messengers/telegram.svg",viber:"https://business.cdn-tinkoff.ru/static/projects/messenger/icons/messengers/viber.svg",whatsapp:"https://business.cdn-tinkoff.ru/static/projects/messenger/icons/messengers/whatsapp.svg"},h={telegram:"\u0422\u0435\u043b\u0435\u0433\u0440\u0430\u043c",viber:"Viber",whatsapp:"WhatsApp"};var f,v,b,y,S,C;!function(e){e.Opened="messenger-button messenger-opened",e.Closed="messenger-button messenger-closed",e.Hidden="messenger-button messenger-button-hidden"}(f||(f={})),function(e){e.Opened="messenger-frame messenger-frame-opened",e.Closed="messenger-frame messenger-frame-closed"}(v||(v={})),function(e){e.Visible="messenger-preloader",e.Hidden="messenger-preloader messenger-preloader-hidden"}(b||(b={})),function(e){e.Visible="unread-indicator",e.Hidden="unread-indicator unread-indicator-hidden"}(y||(y={})),function(e){e.FirstScreen="welcome-form welcome-form_first-screen",e.SecondScreen="welcome-form welcome-form_second-screen"}(S||(S={})),function(e){e.Opened="tmsg-messengers-list-container tmsg-messengers-list-container_opened",e.Closed="tmsg-messengers-list-container tmsg-messengers-list-container_closed"}(C||(C={}));const M={backgroundColor:"#ffdd2d",backgroundHoverColor:"#fcc521",backgroundActiveColor:"#fab619",unreadIndicatorColor:"#e31c1c",iconOpen:"data:image/svg+xml;base64,PHN2ZyBmb2N1c2FibGU9ImZhbHNlIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgaGVpZ2h0PSIzMiIgd2lkdGg9IjMyIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iaWRfNzQzMjU0MDY2NTQ4X3BhaW50MF9saW5lYXJfMTUyNV81NjYiIHgxPSIxMS43NSIgeTE9IjQuNSIgeDI9IjIyLjY4OTQiIHkyPSIyMi41ODI5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9ImN1cnJlbnRDb2xvciI+PC9zdG9wPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3Atb3BhY2l0eT0iMC43IiBzdG9wLWNvbG9yPSJjdXJyZW50Q29sb3IiPjwvc3RvcD4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgPC9kZWZzPgoKICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEuNSA0LjVIMTcuNUMxOS45ODUzIDQuNSAyMiA2LjUxNDcyIDIyIDlWMjNMMTkuNzU1NiAyMC41OTE0QzE4LjgwOTggMTkuNTc2NCAxNy40ODQ5IDE5IDE2LjA5NzYgMTlINkMzLjUxNDcyIDE5IDEuNSAxNi45ODUzIDEuNSAxNC41VjQuNVpNNiAxMUM2IDkuMzQzMTggNy4zNDMxNSA4LjAwMDAzIDkgOC4wMDAwM0gxN0MxNyA5LjY1Njg4IDE1LjY1NjkgMTEgMTQgMTFINlpNOSAxM0M3LjM0MzE1IDEzIDYgMTQuMzQzMiA2IDE2SDEwQzExLjY1NjkgMTYgMTMgMTQuNjU2OSAxMyAxM0g5WiIgZmlsbD0idXJsKCNpZF83NDMyNTQwNjY1NDhfcGFpbnQwX2xpbmVhcl8xNTI1XzU2NikgcmdiYSgwLCAwLCAwLCAwLjcpIj48L3BhdGg+CiAgPHBhdGggb3BhY2l0eT0iMC4zIiBkPSJNNiAxNkM2IDE0LjM0MzEgNy4zNDMxNSAxMyA5IDEzSDEzQzEzIDE0LjY1NjkgMTEuNjU2OSAxNiAxMCAxNkg2WiIgZmlsbD0iY3VycmVudENvbG9yIj48L3BhdGg+Cjwvc3ZnPg==",iconClose:"data:image/svg+xml;base64,PHN2ZyBmb2N1c2FibGU9ImZhbHNlIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgaGVpZ2h0PSIzMiIgd2lkdGg9IjMyIj4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEyIDEzLjM5OTZMMTcuNjAwMSAxOUwxOSAxNy42TDEzLjM5OTkgMTEuOTk5NkwxOC45OTkzIDYuNEwxNy41OTkzIDVMMTIgMTAuNTk5Nkw2LjQwMDY2IDVMNS4wMDA3NCA2LjRMMTAuNjAwMSAxMS45OTk2TDUgMTcuNkw2LjM5OTkzIDE5TDEyIDEzLjM5OTZaIiBmaWxsPSJjdXJyZW50Q29sb3IiPjwvcGF0aD4KPC9zdmc+"};const k="\n    .messenger-preloader {\n        box-sizing: border-box;\n        z-index:3000;\n        height: 56px;\n        width: 56px;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        color: #ffdd2d;\n        position: absolute;\n        display: inline-block;\n        border: 4px solid;\n        border-radius: 50%;\n        border-top-color: transparent;\n        -webkit-animation: tmsg-rotate 1s linear infinite;\n        animation: tmsg-rotate 1s linear infinite\n    }\n    \n    .messenger-preloader-hidden {\n        display: none;\n    }\n    \n    @-webkit-keyframes tmsg-rotate {\n        0% {\n            -webkit-transform: translate(-50%, -50%) rotate(0);\n            transform: translate(-50%, -50%) rotate(0);\n        }\n        100% {\n            -webkit-transform: translate(-50%, -50%) rotate(360deg);\n            transform: translate(-50%, -50%) rotate(360deg);}\n    }\n    @keyframes tmsg-rotate {\n        0% {\n            -webkit-transform: translate(-50%, -50%) rotate(0);\n            transform: translate(-50%, -50%) rotate(0);\n        }\n        100% {\n            -webkit-transform: translate(-50%, -50%) rotate(360deg);\n            transform: translate(-50%, -50%) rotate(360deg);\n        }\n    }",w="\n    .welcome-form.welcome-form_first-screen {\n        height: 144px;\n        min-height: 144px\n    }\n    .welcome-form.welcome-form_second-screen.welcome-form_1-control {\n        height: 316px;\n        min-height: 316px\n    }\n    .welcome-form.welcome-form_second-screen.welcome-form_2-control {\n        height: 372px;\n        min-height: 372px\n    }\n    .welcome-form.welcome-form_second-screen.welcome-form_3-control {\n        height: 430px;\n        min-height: 430px\n    }";const _={invest:["web_terminal","PF_trading_aut"],accounting:["accounting"],tcb_carloans:["carloans_help"],hr_rabota:["rmr_wof_hr","DKO_EL_CLOUD_INV_PERVICHKA","DKO_EL_CLOUD_OKK_PERVICHKA","DKO_EL_CLOUD_SME_PERVICHKA","DKO_EL_CLOUD_TM_PERVICHKA","DKO_EL_CLOUD_TM_SAVE_PERVICHKA","DKO_EL_CLOUD_TC_PERVICHKA","HCC_EL_KNZ","HCC_EL_UOP","HCC_EL_USP","help_recruiting","learn_recruiting","e-learning_sme_ab_test","elearningsmeabtest","Partners_KK","Partners_KNZ","Partners_SU","WT_collection","WT_collection_wg","b2b_education","verif_chat","Internet_acquiring","identification_chat","education_chat_1","education_chat_2","candidate_loginform_lkk_old","candidate_lkk_old_auth","candidate_loginform_noauth"],tinkoff_edu:["fintech"],kids:["junior_web_auth"],hotel:["travel_booking","hotel_web_auth","hotel_web_noauth"]};var I,O,P,T,E,x,A,U,L,D,j,N,z,B;!function(e){e.Unknown="Unknown",e.PhoneNumber="PhoneNumber",e.QueueCode="QueueCode",e.Vdn="Vdn",e.CallSession="CallSession",e.SipLogin="SipLogin",e.UserLogin="UserLogin"}(I||(I={})),function(e){e[e.FromClientToAts=1]="FromClientToAts",e[e.FromAtsToClient=2]="FromAtsToClient",e[e.All=3]="All"}(O||(O={})),function(e){e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warn=3]="Warn",e[e.Error=4]="Error"}(P||(P={})),function(e){e[e.phoneNumber=1]="phoneNumber",e[e.sipNumber=3]="sipNumber",e[e.vdn=5]="vdn",e[e.userLogin=8]="userLogin"}(T||(T={})),function(e){e[e.Unavailable=0]="Unavailable",e[e.Ready=1]="Ready",e[e.SelectedForCall=2]="SelectedForCall",e[e.Establishing=3]="Establishing",e[e.OnCall=4]="OnCall",e[e.PostProcessing=5]="PostProcessing",e[e.Ringing=6]="Ringing",e[e.Connected=7]="Connected",e[e.ConnectingWithConsultant=8]="ConnectingWithConsultant",e[e.Consultation=9]="Consultation",e[e.UserBreak=10]="UserBreak",e[e.Prompting=11]="Prompting"}(E||(E={})),function(e){e[e.Force=1]="Force",e[e.Attended=2]="Attended"}(x||(x={})),function(e){e.ReadOnly="readOnly",e.Open="open"}(A||(A={})),function(e){e.Delivery="delivery",e.Appeal="appeal"}(U||(U={})),function(e){e.Support="support",e.Bot="bot",e.PersonalSupport="personal_support",e.Thread="thread",e.Group="group",e.P2P="p2p",e.Channel="channel",e.Discussion="discussion"}(L||(L={})),function(e){e.Business="\u0422\u0438\u043d\u044c\u043a\u043e\u0444\u0444 \u0411\u0438\u0437\u043d\u0435\u0441",e.Accounting="\u0422\u0438\u043d\u044c\u043a\u043e\u0444\u0444 \u0411\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440\u0438\u044f",e.Bank="\u0422\u0438\u043d\u044c\u043a\u043e\u0444\u0444 \u0411\u0430\u043d\u043a",e.Invest="\u0422\u0438\u043d\u044c\u043a\u043e\u0444\u0444 \u0418\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u0438",e.Carloans="\u0422\u0438\u043d\u044c\u043a\u043e\u0444\u0444 \u0410\u0432\u0442\u043e\u043a\u0440\u0435\u0434\u0438\u0442\u044b",e.HrRabota="\u0422\u0438\u043d\u044c\u043a\u043e\u0444\u0444 \u0420\u0430\u0431\u043e\u0442\u0430",e.Dolyame="\u0414\u043e\u043b\u044f\u043c\u0438",e.Junior="\u0422\u0438\u043d\u044c\u043a\u043e\u0444\u0444 Junior",e.Mobile="\u0422\u0438\u043d\u044c\u043a\u043e\u0444\u0444 \u041c\u043e\u0431\u0430\u0439\u043b"}(D||(D={})),function(e){e.Business="business",e.Accounting="accounting",e.Bank="bank",e.Kids="kids",e.Invest="invest",e.Carloans="tcb_carloans",e.HrRabota="hr_rabota",e.Dolyame="dolyami",e.Mobile="mvno"}(j||(j={})),function(e){e.hint="hint"}(N||(N={})),function(e){e.email="keyboard_email",e.phone="keyboard_phone",e.date="keyboard_date",e.intervalDate="keyboard_interval_date",e.address="keyboard_address"}(z||(z={})),function(e){e.Restaurant="restaurant",e.Movie="movie",e.Spectacle="spectacle",e.Theatre="theatre",e.Concert="concert",e.ConcertHall="concert_hall",e.SportEvent="sport_event"}(B||(B={}));const R="https://business.t-static.ru/static/projects/messenger/icons",W=`${R}/lifestyle`,V=`${R}/business-lines`,F=`${V}/bank.png`,Z=`${V}/business.png`,H=F;j.Invest,j.Accounting,j.Business,j.Mobile,j.Bank,j.Kids,j.Dolyame,B.Restaurant,B.Movie,B.Spectacle,B.Theatre,B.Concert,B.ConcertHall,B.SportEvent;var G,Q,$,q;!function(e){e.InProgress="inProgress",e.Error="error",e.Success="success"}(G||(G={})),function(e){e.Text="text",e.File="file",e.Image="image",e.Widget="widget",e.System="system",e.Payment="payment",e.Sticker="sticker",e.Audio="audio",e.ProblemWidget="problemWidget"}(Q||(Q={})),function(e){e.Client="client",e.Manager="manager",e.Bot="bot",e.Guest="guest"}($||($={})),function(e){e.Online="online",e.Offline="offline",e.Away="away"}(q||(q={}));Object.values(z);var J,Y,X,K,ee,te,ne,se,ie,re,oe,ae,ce,le,ue,de,me,ge;!function(e){e.Tap="tap",e.MessageReceived="message_received"}(J||(J={})),function(e){e.DeepLink="deep_link",e.LongList="longlist",e.Response="response",e.Csat="csat"}(Y||(Y={})),function(e){e.PrimaryTinkoff="primaryTinkoff",e.Secondary="secondary",e.Destructive="destructive",e.Flat="flat",e.PrimaryOpposite="primaryOpposite",e.PrimaryAccent="primaryAccent",e.PrimaryOnLight="primaryOnLight",e.PrimaryOnDark="primaryOnDark",e.GlassOnDark="glassOnDark",e.GlassOnLight="glassOnLight"}(X||(X={})),function(e){e.Square="square",e.Rectangular="rectangular"}(K||(K={})),function(e){e.ImgZone="img_zone",e.InfoZone="info_zone",e.TagZone="tag_zone"}(ee||(ee={})),function(e){e.TmsgThreadId="tmsg_thread_id"}(te||(te={})),function(e){e.TmsgWidgetMb="tmsg_widget_mb",e.TmsgWidgetInvest="tmsg_widget_invest",e.TmsgWidgetSme="tmsg_widget_sme",e.TmsgWidgetDolyami="tmsg_widget_dolyami",e.TmsgWidgetKids="tmsg_widget_kids",e.TmsgWidgetMvno="tmsg_widget_mvno"}(ne||(ne={})),function(e){e.CsatSupportTriggerOperator="csat_support_trigger_operator",e.CsatSupportTriggerBot="csat_support_trigger_bot"}(se||(se={})),function(e){e.Gradient="gradient",e.DarkBlueGradient="dark_blue_grd"}(ie||(ie={})),function(e){e.Title="title",e.Subtitle="subtitle",e.SearchLine="searchline",e.Image="image",e.Tag="tag",e.TagNumber="tagnumber",e.TagSubtitle="tagsubtitle",e.Card="card",e.CardHeader="card_header",e.Account="account",e.Offer="offer",e.Button="button",e.Widget="widget",e.State="state",e.Rating="rating",e.Price="price",e.Address="address",e.Subway="subway",e.Text="text",e.Csat="csat",e.RatingCsat="rating_csat"}(re||(re={})),function(e){e.Unknown="UNKNOWN",e.Economy="ECONOMY",e.Medium="MEDIUM",e.Premium="PREMIUM",e.Luxury="LUXURY"}(oe||(oe={})),function(e){e.GreenCheckmark="green_checkmark",e.BlackClock="black_clock"}(ae||(ae={})),function(e){e.PrimaryInfo="primary_info",e.SecondaryInfo="secondary_info"}(ce||(ce={})),function(e){e.VertList="vert_list",e.HorList="hor_list",e.Approval="approval",e.Link="link",e.CardImage="card_image",e.Post="post",e.LongList="long_list",e.CsatCard="csat_card"}(le||(le={})),function(e){e.LeftDown="left-down",e.LeftUp="left-up",e.RightUp="right-up",e.RightDown="right-down",e.Center="center"}(ue||(ue={})),function(e){e.Center="center",e.Left="left",e.Right="right"}(de||(de={})),function(e){e.HeaderZone="header_zone",e.Cards="cards",e.InfoZone="info_zone",e.HighlightZone="highlight_zone",e.LegalZone="legal_zone",e.ButtonZone="button_zone",e.WidgetZone="widget_zone",e.HeaderImageZone="header_image_zone",e.StateZone="state_zone",e.GeoZone="geo_zone",e.MainZone="main_zone",e.ScaleZone="scale_zone"}(me||(me={})),function(e){e.NoUpdate="no_update",e.Before="before",e.After="after"}(ge||(ge={}));const pe="active_tab";const he={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let fe;const ve=new Uint8Array(16);function be(){if(!fe){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");fe=crypto.getRandomValues.bind(crypto)}return fe(ve)}const ye=[];for(let n=0;n<256;++n)ye.push((n+256).toString(16).slice(1));function Se(e,t=0){return(ye[e[t+0]]+ye[e[t+1]]+ye[e[t+2]]+ye[e[t+3]]+"-"+ye[e[t+4]]+ye[e[t+5]]+"-"+ye[e[t+6]]+ye[e[t+7]]+"-"+ye[e[t+8]]+ye[e[t+9]]+"-"+ye[e[t+10]]+ye[e[t+11]]+ye[e[t+12]]+ye[e[t+13]]+ye[e[t+14]]+ye[e[t+15]]).toLowerCase()}const Ce=function(e,t,n){if(he.randomUUID&&!t&&!e)return he.randomUUID();const s=(e=e||{}).random||(e.rng||be)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=s[e];return t}return Se(s)},Me={};function ke(e,t,n,s,i=0){return s||(s=new Uint8Array(16),i=0),t??=Date.now(),n??=127*e[6]<<24|e[7]<<16|e[8]<<8|e[9],s[i++]=t/1099511627776&255,s[i++]=t/4294967296&255,s[i++]=t/16777216&255,s[i++]=t/65536&255,s[i++]=t/256&255,s[i++]=255&t,s[i++]=112|n>>>28&15,s[i++]=n>>>20&255,s[i++]=128|n>>>14&63,s[i++]=n>>>6&255,s[i++]=n<<2&255|3&e[10],s[i++]=e[11],s[i++]=e[12],s[i++]=e[13],s[i++]=e[14],s[i++]=e[15],s}const we=function(e,t,n){let s;if(e)s=ke(e.random??e.rng?.()??be(),e.msecs,e.seq,t,n);else{const e=Date.now(),i=be();!function(e,t,n){e.msecs??=-1/0,e.seq??=0,t>e.msecs?(e.seq=n[6]<<23|n[7]<<16|n[8]<<8|n[9],e.msecs=t):(e.seq=e.seq+1|0,0===e.seq&&e.msecs++)}(Me,e,i),s=ke(i,Me.msecs,Me.seq,t,n)}return t?s:Se(s)};var _e=n(2381),Ie=n(7517),Oe=n(9080),Pe=n(5154),Te=n.n(Pe),Ee=n(1445),xe=n(4059),Ae=n.n(xe),Ue=function(e,t){return(Ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Le(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ue(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var De=function(){return(De=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function je(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{c(s.next(e))}catch(e){r(e)}}function a(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))}function Ne(e,t){var n,s,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,s&&(i=2&r[0]?s.return:r[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,r[1])).done)return i;switch(s=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,s=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],s=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}function ze(e,t,n){if(n||2===arguments.length)for(var s,i=0,r=t.length;i<r;i++)!s&&i in t||(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||t)}var Be=function(){var e=0;return function(){return{clientEventTimestamp:Date.now(),clientUploadTimestamp:Date.now(),sequence:++e,uuid:Ce()}}},Re={sessionId:{name:"vIdUid",category:_e.CookieCategoryBit.Essential,expires:15768e4,subdomains:!0},wuid:{name:"__P__wuid",category:_e.CookieCategoryBit.Essential,expires:15768e4,subdomains:!0},webviewWuid:{name:"deviceId",category:_e.CookieCategoryBit.Essential,expires:15768e4,subdomains:!0},deviceId:{name:"stDeIdU",category:_e.CookieCategoryBit.Essential,expires:15768e4,subdomains:!0},lastEventTime:{name:"stLaEvTi",category:_e.CookieCategoryBit.Essential,expires:15768e4,subdomains:!0},sessionStartTime:{name:"stSeStTi",category:_e.CookieCategoryBit.Essential,expires:15768e4,subdomains:!0}},We=function(){return _e.w.statistQueue=_e.w.statistQueue||[],_e.w.statistQueue};function Ve(){var e=(0,Ie.parseUrl)(_e.w.location.href);return(0,_e.resolvePageUrl)(e)}var Fe=function(){function e(){this.listeners=Object.create(null)}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter((function(e){return e!==t})))},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var s=this.listeners[e];if(s)for(var i=0,r=s;i<r.length;i++){r[i].apply(void 0,t)}},e}(),Ze=(0,_e.makeCookiesPubl)(new Ie.CookieStorage(_e.cookiesLimits),(0,_e.makeUserConsentVault)()),He=/^[0-9a-f]{32}$/,Ge=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/,Qe=function(e){var t;if((t="cookies"===e.from?e.isWebview?Ze.get(Re.webviewWuid.name):Ze.get(Re.wuid.name):new URLSearchParams(_e.w.location.search).get("wuid"))&&function(e){return He.test(e)||Ge.test(e)}(t))return t},$e=function(e){return"function"==typeof e?e():e},qe={test:atob("aHR0cHM6Ly9hcGktc3RhdGlzdC5kZXYtdGNzZ3JvdXAuaW8="),prod:"https://api-statist.tinkoff.ru"},Je=function(e){try{return _e.w.localStorage.getItem(e)}catch(e){return null}},Ye=function(){var e=Je("__statist_saved_messages");if(null===e)return[];try{return JSON.parse(e)}catch(e){return[]}},Xe=function(){return function(e){try{return _e.w.localStorage.removeItem("__statist_saved_messages"),!0}catch(e){return!1}}()},Ke=function(){function e(e,t){var n,s=this;this.timer=null,this.eventEmitter=new Fe,this.destroy=function(){_e.d.removeEventListener("visibilitychange",s.handleVisibilityChange),_e.w.removeEventListener("pagehide",s.handlePageHide)},this.handleVisibilityChange=function(){"hidden"===_e.d.visibilityState?s.sendByBeacon():s.processSavedMessages()},this.handlePageHide=function(){s.sendByBeacon()},this.pushEventsUrl="".concat(e,"/gateway/v1/events"),this.batchSize=t.batchSize,this.pushInterval=t.pushInterval,this.pushTimeout=null!==(n=t.pushTimeout)&&void 0!==n?n:t.pushInterval,this.savedMessagesSize=t.savedMessagesSize,this.eventsJsonSizeLimit=t.eventsJsonSizeLimit,this.gzipDisabled=!("true"===Je("_statist_enable_gzip")),"visibilityState"in _e.d&&_e.d.addEventListener("visibilitychange",this.handleVisibilityChange,!1),_e.w.addEventListener("pagehide",this.handlePageHide,!1),this.events=this.excludeOutdatedMessages(Ye()),this.sequence=this.getMaxSequence(this.events),this.events.length>0&&(Xe(),this.startPush())}return e.prototype.handleApiError=function(e){var t,n,s=this;if(e.status<200||e.status>=500)return this.saveMessages(e.events),void this.startPush();if(e.response)try{var i=JSON.parse(e.response);if(i.message&&(null===(t=i.details)||void 0===t?void 0:t.errors))return void i.details.errors.forEach((function(t){t&&s.eventEmitter.emit("error",Object.assign(new Error(i.message),{status:e.status,response:t}))}))}catch(e){}this.eventEmitter.emit("error",Object.assign(new Error(null!==(n=e.response)&&void 0!==n?n:e.message),{status:e.status}))},e.prototype.saveMessages=function(e){if(0===e.length)return!0;var t=ze(ze([],Ye(),!0),e,!0);if(t.length>this.savedMessagesSize){var n=t.length-this.savedMessagesSize;t.splice(0,n)}return function(e){try{return function(e,t){try{return _e.w.localStorage.setItem("__statist_saved_messages",t),!0}catch(e){return!1}}(0,JSON.stringify(e))}catch(e){return!1}}(t)},e.prototype.excludeOutdatedMessages=function(e){var t=Date.now();return e.filter((function(e){var n=e.eventParameters.clientEventTimestamp;return t-n<5184e6}))},e.prototype.processSavedMessages=function(){this.events=ze(ze([],Ye(),!0),this.events,!0),this.events.length>0&&(Xe(),this.sequence=this.getMaxSequence(this.events),this.startPush())},e.prototype.getEventsJsonSize=function(){var e=JSON.stringify(this.events);return new Blob([e]).size},e.prototype.on=function(e,t){this.eventEmitter.on(e,t)},e.prototype.off=function(e,t){this.eventEmitter.off(e,t)},e.prototype.startPush=function(){var e=this;if(0!==this.events.length){var t=function(t){return(e.isReady()?e.pushEvents(t):Promise.resolve()).then((function(){e.timer=null,e.startPush()}),(function(t){e.timer=null,e.handleApiError(t)}))};this.getEventsJsonSize()>=this.eventsJsonSizeLimit?t(this.events.length):this.timer||(this.timer=setTimeout((function(){return t(e.batchSize)}),this.pushInterval))}},e.prototype.pushEvents=function(e){return je(this,void 0,void 0,(function(){var t;return Ne(this,(function(n){return t=this.events.splice(0,e),[2,this.sendByXhr(t)]}))}))},e.prototype.updateTimestamp=function(e){for(var t=Date.now(),n=0,s=e;n<s.length;n++)s[n].eventParameters.clientUploadTimestamp=t},e.prototype.updateSequence=function(e){e.eventParameters.sequence=++this.sequence},e.prototype.getMaxSequence=function(e){var t=0;return e.forEach((function(e){var n=e.eventParameters.sequence;n>t&&(t=n)})),t},e.prototype.sendByXhr=function(e){var t=this;return _e.Xhr?e.length?(this.updateTimestamp(e),new Promise((function(n,s){var i=new _e.Xhr,r=function(){if(i.status>=200&&i.status<=204)n();else{var t=Object.assign(new Error(i.responseText),{status:i.status,response:i.responseText,events:e});s(t)}};i.onerror=r,i.onload=r,i.ontimeout=r,i.timeout=t.pushTimeout;var o=JSON.stringify(e);t.gzipDisabled?t.sendEventsJSON(o,i):t.sendEventsGZip(o,i)}))):Promise.resolve():Promise.reject()},e.prototype.sendEventsJSON=function(e,t){t.open("POST",this.pushEventsUrl,!0),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send(e)},e.prototype.sendEventsGZip=function(e,t){var n=this;(function(e){return je(void 0,void 0,void 0,(function(){return Ne(this,(function(t){return[2,Promise.resolve().then((function(){return new Blob([e],{type:"application/json"}).stream().pipeThrough(new _e.w.CompressionStream("gzip"))})).then((function(e){return new Response(e)})).then((function(e){return e.blob()}))]}))}))})(e).then((function(e){try{t.open("POST",n.pushEventsUrl,!0),t.setRequestHeader("Content-Type","application/gzip"),t.setRequestHeader("Content-Encoding","gzip"),t.send(e)}catch(e){}})).catch((function(){n.sendEventsJSON(e,t)}))},e.prototype.sendByBeacon=function(){var e=this.events;this.events=[],e.length&&(_e.n.onLine?(this.updateTimestamp(e),_e.n.sendBeacon(this.pushEventsUrl,JSON.stringify(e))||this.saveMessages(e)):this.saveMessages(e))},e.prototype.forceSend=function(){this.sendByBeacon()},e.prototype.send=function(e){this.updateSequence(e),this.events.push(e),this.startPush()},e.prototype.isReady=function(){return!0},e}(),et=function(e){console.error(e)},tt=function(){function e(e,t,n,s){void 0===s&&(s=18e5),this.clientParameters=e,this.transport=t,this.eventParameters=n,this.sessionTimeout=s,this.deviceId=function(){var e,t="true"===new URLSearchParams(_e.w.location.search).get("iswebview"),n=Qe({from:"query"}),s=Qe({from:"cookies"}),i=Qe({from:"cookies",isWebview:t});return t&&i?(e=i,s&&!t||Ze.set(Re.wuid,e)):n?(e=n,s&&!t||Ze.set(Re.wuid,e)):e=s,e||(e=function(e){var t="";if("undefined"!=typeof crypto){var n=Math.ceil(16),s=new Uint8Array(n);crypto.getRandomValues(s),s.forEach((function(e){t+=e.toString(16).padStart(2,"0")}))}else for(var i=0;i<32;i++)t+="0123456789abcdef".charAt(Math.floor(16*Math.random()));return t.substring(0,32)}(),Ze.set(Re.wuid,e)),function(e){Ze.get(Re.deviceId.name)!==e&&Ze.set(Re.deviceId,e)}(e),e}(),this.screenWidth=_e.w.screen.width,this.screenHeight=_e.w.screen.height,this.codegenVersion="",this.eventEmitter=new Fe,this.eventEmitter.on("message",(function(e){var t;!function(e){var t=We();t.history||(t.history=[]),t.history.length>=1e3||t.history.push(e)}(e),(t=We(),t.listeners||(t.listeners=[]),t.listeners).forEach((function(t){try{t(e)}catch(e){et(e)}}))}));var i,r,o=this.processStatistQueue.bind(this);i=o,(r=We()).handlerApplied||(r.handlerApplied=!0,r.forEach((function(e){return i(e)})),r.length=0,r.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.forEach((function(e){return i(e)})),0})}return e.prototype.processStatistQueue=function(e){try{if(!e||!Array.isArray(e))return;var t=e;switch(t[0]){case"send":t[0];var n=t.slice(1);return void this.send.apply(this,n);case"updateUserProperties":return t[0],n=t.slice(1),void this.updateUserProperties.apply(this,n);case"updateFeatureFlags":return t[0],n=t.slice(1),void this.updateFeatureFlags.apply(this,n);case"updateABGroups":return t[0],n=t.slice(1),void this.updateABGroups.apply(this,n);case"getMessagesHistory":return t[0],void(0,t[1])((s=We(),s.history||(s.history=[]),s.history));case"onMessage":t[0],function(e){var t=We();t.listeners||(t.listeners=[]),t.listeners.push(e)}(t[1])}}catch(e){et(e)}var s},e.createTransport=function(e){var t=e.transportOptions,n=e.environment,s=t||{},i=s.batchSize,r=void 0===i?100:i,o=s.pushInterval,a=void 0===o?5e3:o,c=s.pushTimeout,l=void 0===c?3e4:c,u=s.savedMessagesSize,d=void 0===u?1e3:u,m=s.eventsJsonSizeLimit,g=void 0===m?32e3:m,p=s.endpointUrl,h=void 0===p?qe[n||"prod"]:p,f=s.gzip,v=void 0===f||f,b=_e.g._statistTransports||(_e.g._statistTransports={});_e.g._statistTransport&&!b[qe.prod]&&(b[qe.prod]=_e.g._statistTransport),_e.g._statistDevTransport&&!b[qe.test]&&(b[qe.test]=_e.g._statistDevTransport);var y=b[h];if(y)return y;var S=new Ke(h,{batchSize:r,pushInterval:a,pushTimeout:l,preconnect:!1,savedMessagesSize:d,eventsJsonSizeLimit:g,gzip:v});return b[h]=S,h===qe.prod?_e.g._statistTransport=S:h===qe.test&&(_e.g._statistDevTransport=S),S},e.prototype.getSessionId=function(){var e=Ze.get(Re.sessionId.name),t=Number(Ze.get(Re.lastEventTime.name))||null;if(null!==e&&null!==t&&Date.now()-t<this.sessionTimeout)return e;var n=we();return Ze.set(Re.sessionId,n),Ze.remove(Re.lastEventTime.name),Ze.remove(Re.sessionStartTime.name),n},e.prototype.getSessionStartTime=function(){return null===Ze.get(Re.sessionStartTime.name)?Date.now():Number(Ze.get(Re.sessionStartTime.name))},e.prototype.resolveClientParameters=function(e){return De(De({},null!=e?e:this.clientParameters),{sessionId:this.getSessionId(),deviceId:this.deviceId,sessionStartTime:this.getSessionStartTime(),screenWidth:this.screenWidth,screenHeight:this.screenHeight,sdkVersion:"0.4.92",codegenVersion:this.codegenVersion})},e.prototype.resolveFullClientParameters=function(e){var t,n=(t=(0,Ee.parseUrl)(_e.w.location.href),(0,Ie.resolvePreviousPage)({location:t,referrer:(0,Ie.referrer)(),internalDomains:Oe.x}));return De(De(De(De({},this.resolveClientParameters(e)),function(){var e=(0,Ie.parseUrl)(_e.w.location.href),t=(0,_e.resolveReferrer)({referrer:(0,Ie.referrer)(),locationHostname:e.hostname});return function(e){return["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].reduce((function(t,n){var s,i=e[n];return i&&(t[(s=n,Te()(s))]=i),t}),{})}((0,_e.resolveUtmMarkers)({cookies:(0,_e.makeCookiesPubl)(new Ie.SafeCookieStorage(_e.cookiesLimits),(0,_e.makeUserConsentVault)()),location:e,referrer:t,parseUrl:Ie.parseUrl,internalDomains:Oe.x}).utmMarkers)}()),n&&{referrer:n}),{pageUrl:Ve()})},e.prototype.transportSend=function(e){this.transport.send(e),Ze.set(Re.lastEventTime,Date.now()),null===Ze.get(Re.sessionStartTime.name)&&Ze.set(Re.sessionStartTime,e.clientParameters.sessionStartTime)},e.prototype.sendUserProperties=function(e,t,n,s){var i,r,o=((i={kind:"userProperties",project:e,eventParameters:$e(this.eventParameters),clientParameters:this.resolveClientParameters()})[n]=((r={})["$".concat(t)]=s,r),i);this.transportSend(o),this.eventEmitter.emit("message",{type:"userProperties",message:o})},e.prototype.send=function(e,t,n,s){var i={project:e,name:t,parameters:n,eventParameters:$e(this.eventParameters),clientParameters:this.resolveFullClientParameters(s)};this.transportSend(i),this.eventEmitter.emit("message",{type:"event",message:i})},e.prototype.updateClientParameters=function(e){for(var t in e)this.clientParameters[t]=e[t]},e.prototype.updateUserProperties=function(e,t,n){this.sendUserProperties(e,t,"userProperties",null!=n?n:{})},e.prototype.updateFeatureFlags=function(e,t){this.sendUserProperties(e,"set","featureFlags",null!=t?t:{})},e.prototype.updateABGroups=function(e,t){this.sendUserProperties(e,"set","ABGroups",null!=t?t:{})},e.prototype.on=function(e,t){"message"===e?this.eventEmitter.on(e,t):this.transport.on(e,t)},e.prototype.off=function(e,t){"message"===e?this.eventEmitter.off(e,t):this.transport.off(e,t)},e.prototype.forceSend=function(){var e,t;null===(t=(e=this.transport).forceSend)||void 0===t||t.call(e)},e.prototype.enrichFork=function(e){void 0===e&&(e={});var t=this.send.bind(this),n=Object.create(this);return n.send=function(n,s,i,r){return t(n,s,function(e,t){if(!t)return e;var n="function"==typeof t?t():t,s=Object.keys(n).reduce((function(e,t){var s=n[t];return e[t]="function"==typeof s?s():s,e}),{});return Object.assign(s,e||{})}(i,e.parameters),r)},n},e.prototype._setCodegenVersion=function(e){this.codegenVersion=e},e}(),nt=function(e){return _e.g._statistClientInitOptions?Ae()(e,_e.g._statistClientInitOptions):e},st=function(e){function t(t){var n=nt(t);return e.call(this,n.clientParameters,tt.createTransport(n),n.eventParameters||Be(),n.sessionTimeout)||this}return Le(t,e),t.prototype.send=function(t,n,s,i){return e.prototype.send.call(this,t,n,s||{},i)},t}(tt);!function(e){function t(t){var n=nt(t);return e.call(this,n.clientParameters,tt.createTransport(t),n.eventParameters||Be(),n.sessionTimeout)||this}Le(t,e),t.prototype.send=function(t,n,s,i){return e.prototype.send.call(this,t,n,s,i)}}(tt);const it={client:"client-widget-ui",clientVersion:"1.0.0",ssoId:null};const rt="isTmsgGuestZone";const ot=new class EventEmitter{constructor(){this.listeners={},this.onceListeners={}}on(e,t){return this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t),this}once(e,t){return this.onceListeners[e]=this.onceListeners[e]||[],this.onceListeners[e].push(t),this}off(e,t){var n;const s=null===(n=this.listeners[e])||void 0===n?void 0:n.indexOf(t);return s>-1&&this.listeners[e].splice(s,1),this}removeAllListeners(e){return this.listeners[e]=[],this.onceListeners[e]=[],this}emit(e,...t){var n,s;null===(n=this.listeners[e])||void 0===n||n.forEach((e=>{e(...t)})),null===(s=this.onceListeners[e])||void 0===s||s.forEach((e=>{e(...t)})),this.onceListeners[e]=[]}},at=new class MessengerService{constructor(){this.isMessengerInited=!1,this.isMessengerOpened=!1,this.isMessengersListOpened=!1,this.isUnreadMessages=!1,this.shouldDisplayWelcomeForm=!1,this.currentWelcomeFormScreen=g.First}get iframeUrl(){return this.iframeUrlValue}set iframeUrl(e){this.iframeUrlOrigin=new URL(e).origin,this.iframeUrlValue=e}getTmsgHostUrl(e){return e.replace(/(business|webim)/g,"tmsg").replace(/\/messenger\/(sme|platform)\/?/g,"").split("?")[0]}getAppId(e,t="business"){return Object.keys(_).find((t=>-1!==_[t].indexOf(e)))||t}},ct=new class StatistService{constructor(){this.client=new st({clientParameters:it,transportOptions:{endpointUrl:"https://api-statist.tinkoff.ru"}})}send(e,t){this.client.send("tmsg.client.web.events",e,t)}},lt=new class MobileService{constructor(e){this.eventEmitter=e,this.viewportResizeTimer=null,this.shouldCheckMobileMode=!1,this.isMobileMode=!1,this.onResize=()=>{this.checkIfMobileMode()},this.onViewportResize=()=>{this.clearViewportResizeTimer(),this.viewportResizeTimer=setTimeout((()=>{const{width:e,height:t,scale:n}=window.visualViewport;this.eventEmitter.emit(c.ViewportResize,{width:e,height:t,scale:n}),this.fixViewportPosition()}),100)}}initialize(e){this.iframe=e,this.checkMobileMode(),this.listenViewportResize()}checkMobileMode(){this.isMobileMode=!1,this.shouldCheckMobileMode&&(this.checkIfMobileMode(),window.addEventListener("resize",this.onResize))}listenViewportResize(){var e;this.isMobile()&&(null===(e=window.visualViewport)||void 0===e||e.addEventListener("resize",this.onViewportResize))}destroy(){var e;window.removeEventListener("resize",this.onResize),null===(e=window.visualViewport)||void 0===e||e.removeEventListener("resize",this.onViewportResize),this.clearViewportResizeTimer()}checkIfMobileMode(){const e=window.innerWidth<768;e!==this.isMobileMode&&(this.isMobileMode=e,this.eventEmitter.emit(c.Resize,this.isMobileMode))}clearViewportResizeTimer(){null!==this.viewportResizeTimer&&clearTimeout(this.viewportResizeTimer)}isMobile(){var e;const t=null===(e=navigator.userAgent)||void 0===e?void 0:e.toLowerCase();return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br([ev])w|bumb|bw-([nu])|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do([cp])o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly([-_])|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-([mpt])|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c([- _agpst])|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac([ \-/])|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja([tv])a|jbro|jemu|jigs|kddi|keji|kgt([ /])|klon|kpt |kwc-|kyo([ck])|le(no|xi)|lg( g|\/([klu])|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t([- ov])|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30([02])|n50([025])|n7(0([01])|10)|ne(([cm])-|on|tf|wf|wg|wt)|nok([6i])|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan([adt])|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c([-01])|47|mc|nd|ri)|sgh-|shar|sie([-m])|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel([im])|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c([- ])|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/.test(t.slice(0,4))}isPwa(){return window.matchMedia("(display-mode: standalone)").matches}fixViewportPosition(){window.document.activeElement===this.iframe&&this.isPwa()&&0!==window.visualViewport.offsetTop&&(window.scrollTo(window.scrollX,window.scrollY),window.visualViewport.height===window.document.documentElement.clientHeight&&this.iframe.blur())}}(ot),ut=new class DomService{constructor(e,t,n,s){this.eventEmitter=e,this.messengerService=t,this.mobileService=n,this.statistService=s,this.parentUrl=window.location.href.split("?")[0],this.closeMessengerOnStart=!0,this.initIframe()}appendIframe(e){this.iframe.src=this.messengerService.iframeUrl;const t=performance.now();this.statistService.send("launcher.iframe.init",{url:this.parentUrl}),this.eventEmitter.removeAllListeners(a.IframeInitSuccess),this.eventEmitter.once(a.IframeInitSuccess,(()=>{this.statistService.send("launcher.iframe.init.success",{url:this.parentUrl,duration:Math.round(performance.now()-t)})})),this.iframe.onload=()=>{this.messengerButton&&this.closeMessengerOnStart&&this.setMessengerClosedStyles(),this.eventEmitter.emit(a.IframeLoad),setTimeout((()=>{this.messengerService.isMessengerInited||(this.statistService.send("launcher.iframe.init.error",{url:this.parentUrl,duration:Math.round(performance.now()-t)}),this.eventEmitter.emit(i.OnMessengerFail),this.hideMessengerPreloader())}),5e3)},e.appendChild(this.iframe)}listenUnreadIndicatorChanges(){this.eventEmitter.on(i.OnUnreadIndicatorChanged,(e=>{this.unreadIndicator.className=e&&!this.messengerService.isMessengerOpened?y.Visible:y.Hidden}))}listenUnreadMessagesCountChange(){this.eventEmitter.on(i.OnUnreadMessagesCountChanged,(e=>{var t;this.unreadMessagesCount&&(this.unreadMessagesCount.innerText=(t=e,t?t>=1e3?`${Math.floor(t/1e3)}K`:`${t}`:"").toString())}))}addWidgetStylesAndElements(e,t){this.addWidgetStyles(t),this.addMessengerButtonAndContainer(e),this.listenMessengerButtonEvents()}addMessengersList(t,n){this.addMessengersListStyles(),this.messengersListContainer=document.createElement("div"),this.messengersListContainer.className=C.Closed;this.getMessengersListItems(n).forEach((e=>{this.messengersListContainer.appendChild(this.getMessengersListElement(e))}));const s=this.getChatElement();s.addEventListener("click",(t=>{t.stopPropagation(),this.messengersListContainer.className=C.Closed,this.eventEmitter.emit(e.OpenMessenger)})),this.messengersListContainer.appendChild(s),t.appendChild(this.messengersListContainer)}addMessengerPreloader(){this.messengerPreloader||(this.addPreloaderStyles(),this.messengerPreloader=document.createElement("div"),this.messengerService.appContainer.appendChild(this.messengerPreloader)),this.messengerPreloader.className=b.Visible}hideMessengerPreloader(){this.messengerPreloader&&(this.messengerPreloader.className=b.Hidden)}addWidgetStyles(e){const t=document.createElement("style"),n=function(e){const t=Object.assign(Object.assign({},M),e),{backgroundColor:n,backgroundHoverColor:s,backgroundActiveColor:i,iconOpen:r,iconClose:o}=t;return`\n        :root {\n            --mess-font-text: tuiText, -apple-system, 'BlinkMacSystemFont', system-ui, 'Roboto', 'Segoe UI', 'Helvetica Neue', sans-serif;\n            --mess-font-text-s: normal 0.8125rem/1.25rem var(--mess-font-text);\n        }\n         \n        html {\n            font-size: 16px;\n        }\n         \n        .messenger-button {\n            width: 60px;\n            height: 60px;\n            position:fixed;\n            bottom: 18px;\n            right:18px;\n            z-index: 1000;\n        }\n        \n        .messenger-button__inner-wrapper {\n            width: 60px;\n            height: 60px;\n            position: relative\n        }\n        \n        .messenger-button__inner-wrapper:hover .messenger-button__icon {\n            background-color:${s}\n        }\n\n        .messenger-button__inner-wrapper:active .messenger-button__icon {\n            background-color:${i}\n        }\n        \n        .messenger-button__icon {\n            width: 60px;\n            height: 60px;\n            background-color: ${n};\n            background-repeat: no-repeat;\n            background-position: 50% 50%;\n            position: absolute;\n            left: 0;\n            right: 0;\n            top: 0;\n            bottom: 0;\n            border-radius: 40px;\n            box-shadow: 0 10px 25px 0 rgba(0,0,0,.1);\n            cursor: pointer;\n            will-change:transform;\n            -webkit-transition: all .2s cubic-bezier(.25,0,.25,1);\n            -o-transition: all .2s cubic-bezier(.25,0,.25,1);\n            transition: all .2s cubic-bezier(.25,0,.25,1);\n            transition-property: transform,opacity,background-color,-webkit-transform;\n            -webkit-transform: translate3d(0,0,0);\n            transform:translate3d(0,0,0)\n        }\n        \n        .messenger-button__icon-chat {\n            background-image: url(${r})\n        }\n        \n        .messenger-button__icon-close {\n            background-image: url(${o})\n        }\n        \n        .messenger-opened .messenger-button__icon-close {\n            -webkit-transform:rotate(90deg);\n            -ms-transform:rotate(90deg);\n            transform: rotate(90deg);\n            opacity: 1;\n        }\n        \n        .messenger-closed .messenger-button__icon-close {\n            opacity: 0;\n        }\n        \n        .messenger-opened .messenger-button__icon-chat {\n            -webkit-transform: scale(.3);\n            -ms-transform: scale(.3);\n            transform: scale(.3);\n            opacity: 0;\n        }\n        \n        .messenger-closed .messenger-button__icon-chat {\n            opacity: 1;\n        }\n        \n        .messenger-button-hidden {\n            display: none\n        }\n        \n        .unread-indicator {\n            box-sizing: border-box;\n            position: absolute;\n            right: -4px;\n            top: -2px;\n            background-color: ${t.unreadIndicatorColor||M.unreadIndicatorColor};\n            min-width: 24px;\n            height: 24px;\n            padding: 0 0.25rem;\n            border-radius: 50%;\n            text-align: center;\n            color: #fff;\n            font: var(--mess-font-text-s);\n            user-select: none;\n            cursor: pointer;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n        \n        .unread-indicator-hidden {\n            display: none;\n        }`}(e)+`\n        ${this.mobileService.shouldCheckMobileMode?"\n            .messenger-frame {\n                position: fixed;\n                top: 0;\n                right: 0;\n                bottom: 0;\n                left: 0;\n                z-index: 2001;\n            }\n            @media (min-width: 768px) {\n                .messenger-frame {\n                    position: fixed;\n                    width: 400px;\n                    height: 600px;\n                    max-height: calc(100vh - 212px);\n                    min-height: 360px;\n                    bottom: 92px;\n                    right: 18px;\n                    top: initial;\n                    left: initial;\n                }\n            }":"\n            .messenger-frame {\n                position: fixed;\n                width: 400px;\n                height: 600px;\n                max-height: calc(100vh - 212px);\n                min-height: 360px;\n                bottom: 92px;\n                right: 18px;\n                top: initial;\n                left: initial;\n            }\n        "}\n        \n        .messenger-frame-closed {\n            visibility: hidden; height: 0\n        }\n        .messenger-frame-opened {\n            visibility: visible;\n            opacity: 1;\n        }`+k;t.appendChild(document.createTextNode(n)),document.head.appendChild(t)}addPreloaderStyles(){const e=document.createElement("style");e.appendChild(document.createTextNode(k)),document.head.appendChild(e)}addWelcomeFormStyles(){const e=document.createElement("style"),t=this.mobileService.shouldCheckMobileMode?`@media (min-width: 768px) {${w}}`:w;e.appendChild(document.createTextNode(t)),document.head.appendChild(e)}setMessengerOpenedStyles(){this.messengerContainer.className=v.Opened,this.messengerButton.className=f.Opened,this.unreadIndicator.className=y.Hidden,this.messengerService.shouldDisplayWelcomeForm&&this.addWelcomeFormClasses(),this.messengerService.isMessengerInited||(this.messengerPreloader.className=b.Visible)}setMessengerClosedStyles(){this.messengerContainer.className=v.Closed,this.messengerButton.className=f.Closed,this.unreadIndicator.className=y.Hidden,this.messengerPreloader.className=b.Hidden,this.messengerService.isUnreadMessages&&(this.unreadIndicator.className=y.Visible)}onMessengerOpen(){this.messengerButton&&this.setMessengerOpenedStyles()}onMessengerClose(){this.messengerButton&&this.setMessengerClosedStyles()}onMessengersListOpen(){this.messengersListContainer&&(this.messengerService.isMessengersListOpened=!0,this.messengerButton.className=f.Opened,this.messengersListContainer.className=C.Opened)}onMessengersListClose(){this.messengersListContainer&&(this.messengerService.isMessengersListOpened=!1,this.messengersListContainer.className=C.Closed)}updateWelcomeFormScreen(e){this.removeWelcomeFormClasses(),this.messengerService.shouldDisplayWelcomeForm=!!e,this.messengerService.currentWelcomeFormScreen=e,this.messengerService.shouldDisplayWelcomeForm&&this.addWelcomeFormClasses()}initIframe(){this.iframe=document.createElement("iframe"),this.iframe.style.cssText="\n    height: 100%;\n    width: 100%;\n    box-shadow: 4px 0px 24px rgba(0, 0, 0, 0.12);\n    border-radius: 12px;\n    background: #fff;\n",this.iframe.setAttribute("frameBorder","0"),this.iframe.setAttribute("allow","microphone; clipboard-read; clipboard-write")}addMessengerButtonAndContainer(e){this.messengerButton=document.createElement("div"),this.messengerButton.innerHTML='\n    <div class="messenger-button__inner-wrapper">\n        <div class="messenger-button__icon messenger-button__icon-chat"></div>\n        <div class="messenger-button__icon messenger-button__icon-close"></div>\n    </div>',this.unreadIndicator=document.createElement("div"),this.unreadIndicator.setAttribute("automation-id","unread-indicator"),this.unreadMessagesCount=document.createElement("div"),this.messengerContainer=document.createElement("div"),this.messengerPreloader=document.createElement("div"),this.messengerButton.className=f.Hidden,this.messengerContainer.className=v.Closed,this.messengerPreloader.className=b.Hidden,this.messengerButton.appendChild(this.unreadIndicator),this.unreadIndicator.appendChild(this.unreadMessagesCount),e.appendChild(this.messengerButton),e.appendChild(this.messengerContainer),this.messengerContainer.appendChild(this.messengerPreloader),this.messengerService.appContainer=this.messengerContainer,this.messengerContainer.appendChild(this.iframe)}listenMessengerButtonEvents(){this.messengerButton.addEventListener("click",(t=>{t.stopPropagation(),this.eventEmitter.emit(e.ToggleMessenger)}))}getMessengersListElement({icon:e,href:t,name:n}){const s=document.createElement("a");return s.innerHTML=`<a class="tmsg-messengers-list__item" href="${t}" target="_blank" rel="noopener">\n            <div class="tmsg-messengers-list__icon" style="background-image: url('${e}')"></div>\n            <span>${n}</span>\n        </a>`,s}getChatElement(){const e=document.createElement("div");return e.innerHTML='<div class="tmsg-messengers-list__item">\n            <div class="tmsg-messengers-list__icon" style="background-image: url(\'https://business.cdn-tinkoff.ru/static/projects/messenger/icons/messengers/tmsg.svg\')"></div>\n            <span>\u0427\u0430\u0442</span>\n        </div>',e}addMessengersListStyles(){const e=document.createElement("style");e.appendChild(document.createTextNode("\n    .tmsg-messengers-list-container {\n        position: fixed;\n        display: flex;\n        justify-content: flex-end;\n        flex-wrap: wrap;\n        max-width: 360px;\n        bottom: 92px;\n        right: 12px;\n        z-index: 1001;\n    }\n    .tmsg-messengers-list-container_closed {\n        display: none;\n    }\n    .tmsg-messengers-list__item {\n        display: flex;\n        align-items: center;\n        width: max-content;\n        margin: 6px;\n        padding: 4px;\n        border-radius: 14px;\n        color: #000;\n        text-decoration: none;\n        background: #eaecee;\n        cursor: pointer;\n    }\n    .tmsg-messengers-list__item:hover {\n        background: #c7c9cc;\n    }\n    .tmsg-messengers-list__item span {\n        padding: 8px 12px;\n    }\n    .tmsg-messengers-list__icon {\n        width: 36px;\n        height: 36px;\n        border-radius: 14px;\n        background-color: #fff;\n        background-repeat: no-repeat;\n        background-position: 50% 50%;\n    }")),document.head.appendChild(e)}addWelcomeFormClasses(){const e=this.getCurrentWelcomeFormClasses();this.messengerContainer.classList.add(...e.split(" "))}removeWelcomeFormClasses(){const e=this.getCurrentWelcomeFormClasses();this.messengerContainer.classList.remove(...e.split(" "))}getCurrentWelcomeFormClasses(){switch(this.messengerService.currentWelcomeFormScreen){case g.First:return S.FirstScreen;case g.Second:{const e=Object.keys(this.messengerService.welcomeFormConfig.secondScreen.controls).length;return`${S.SecondScreen} welcome-form_${e}-control`}default:return""}}getMessengersListItems(e){const t=[];return Object.keys(p).forEach((n=>{e[n]&&t.push({name:h[n],href:e[n],icon:p[n]})})),t}}(ot,at,lt,ct),dt=new class NotificationService{constructor(e){this.messengerService=e,this.canCreateNotifications=!0,this.onRecalculateTab=()=>{this.recalculateActiveTab()}}get notificationsAvailable(){return!!window.Notification&&this.canCreateNotifications}get hasPermission(){return this.notificationsAvailable&&"granted"===window.Notification.permission}recalculateActiveTab(){document.hasFocus()?setTimeout((()=>{localStorage.setItem(pe,"true")})):localStorage.removeItem(pe)}initialize(){this.notificationsAvailable&&(this.recalculateActiveTab(),this.askForNotifications(),window.addEventListener("beforeunload",this.onRecalculateTab),window.addEventListener("focus",this.onRecalculateTab),window.addEventListener("blur",this.onRecalculateTab))}destroy(){window.removeEventListener("beforeunload",this.onRecalculateTab),window.removeEventListener("focus",this.onRecalculateTab),window.removeEventListener("blur",this.onRecalculateTab)}notify(e,t,n,s){if(localStorage.getItem(pe)||!this.notificationsAvailable)return;let i;try{i=new window.Notification(e,{body:t,tag:n,data:s,icon:H})}catch(r){return void(this.canCreateNotifications=!1)}i.onclick=function(){window.focus(),window["t-messenger"].api.openMessenger(),(null==s?void 0:s.conversationId)&&window["t-messenger"].api.openConversationById(s.conversationId),this.close()}}askForNotifications(){const e=!1!==this.messengerService.tmsgInitData.requestNotificationPermission;this.notificationsAvailable&&!this.hasPermission&&e&&window.Notification.requestPermission()}}(at),mt=new class AppPostMessageService{constructor(t,n,s,r){this.eventEmitter=t,this.messengerService=n,this.domService=s,this.notificationService=r,this.postMessagesQueue=[],this.onMessage=t=>{const n=!t.origin||t.origin===this.messengerService.iframeUrlOrigin;if(!t.data||!n)return;const{messageCode:s,data:r}=t.data;switch(s){case l.UpdateUnreadCounter:this.eventEmitter.emit(i.OnUnreadIndicatorChanged,!!r),this.messengerService.isUnreadMessages=!!r;break;case l.UpdateUnreadMessagesCount:this.eventEmitter.emit(i.OnUnreadMessagesCountChanged,r);break;case l.TmsgInit:this.messengerService.isMessengerInited=!0,this.sendQueuedMessages(),this.sendDataToApplication(),this.domService.hideMessengerPreloader(),this.eventEmitter.emit(a.IframeInitSuccess),this.eventEmitter.emit(i.OnMessengerInited);break;case l.TmsgClose:this.eventEmitter.emit(e.CloseMessenger);break;case l.FocusEvent:this.notificationService.recalculateActiveTab();break;case l.PushNotification:{const{authorName:e,messageId:t,conversationId:n,content:s}=r;this.notificationService.notify(e,s,t,{conversationId:n});break}case l.TmsgUpdateSession:this.eventEmitter.emit(i.OnMessengerUpdateSession);break;case l.TmsgUrlRequest:this.sendPostMessageWithoutQueue(l.TmsgUrlResponse,this.messengerService.iframeUrl);break;case l.TmsgWelcomeFormDisplayStatus:this.messengerService.shouldDisplayWelcomeForm=r,this.messengerService.isMessengerOpened&&this.messengerService.shouldDisplayWelcomeForm&&this.domService.updateWelcomeFormScreen(this.messengerService.currentWelcomeFormScreen);break;case l.TmsgWelcomeFormScreenChanged:this.domService.updateWelcomeFormScreen(r);break;case l.TmsgPlatformUserRequest:this.sendPostMessageWithoutQueue(l.TmsgPlatformUserResponse,this.messengerService.tmsgInitData.user);break;case l.TmsgScreenChanged:this.eventEmitter.emit(i.OnMessengerScreenChanged,r)}}}listenMessages(){window.addEventListener("message",this.onMessage)}sendQueuedMessages(){this.postMessagesQueue.length&&this.messengerService.isMessengerInited&&(this.postMessagesQueue.forEach((({messageCode:e,data:t})=>{this.sendPostMessage(e,t)})),this.postMessagesQueue=[])}sendPostMessageWithoutQueue(e,t){this.domService.iframe.contentWindow&&this.domService.iframe.contentWindow.postMessage({messageCode:e,data:t},this.messengerService.iframeUrlOrigin)}sendPostMessage(e,t){this.messengerService.isMessengerInited?this.sendPostMessageWithoutQueue(e,t):this.postMessagesQueue.push({messageCode:e,data:t})}sendDataToApplication(){const{title:e,subtitle:t,avatarUrl:n,colorConfig:s,welcomeFormConfig:i,closeButtonVisibility:r}=this.messengerService.widgetOptions;this.messengerService.tmsgInitData&&this.sendPostMessage(l.TmsgUserInfo,Object.assign({},this.messengerService.tmsgInitData)),e&&this.sendPostMessage(l.TmsgWidgetTitle,e),t&&this.sendPostMessage(l.TmsgWidgetSubtitle,t),n&&this.sendPostMessage(l.TmsgWidgetAvatar,n),s&&this.sendPostMessage(l.TmsgColorConfig,s),i&&this.sendPostMessage(l.TmsgWelcomeFormConfig,i),r&&this.sendPostMessage(l.TmsgCloseButtonVisibility,r)}destroy(){window.removeEventListener("message",this.onMessage)}}(ot,at,ut,dt),gt=new class LazyMessengerInitService{constructor(e){this.domService=e,this.timer=null,this.isInitFnInvoked=!1,this.initFn=()=>{}}initMessenger(e,t){this.initFn=e;const n=null==t?void 0:t.startOnClick,s=null==t?void 0:t.startDelay;if(!n)return s?(this.showMessengerButton(),void(this.timer=setTimeout((()=>{this.invokeInitFn()}),s))):void this.invokeInitFn();this.showMessengerButton()}onMessengerOpen(){this.domService.messengerButton&&!this.isInitFnInvoked&&(clearTimeout(this.timer),this.invokeInitFn())}invokeInitFn(){this.initFn(),this.isInitFnInvoked=!0}showMessengerButton(){this.domService.closeMessengerOnStart=!1,this.domService.setMessengerClosedStyles()}}(ut),pt=new class WebimAuthService{constructor(t,n){this.eventEmitter=t,this.messengerService=n,this.onStorage=t=>{const{storageArea:n,key:s,newValue:i}=t;n===localStorage&&s===rt&&"true"===i&&(this.messengerService.tmsgInitData.user=null,this.eventEmitter.emit(e.InitTmsg,this.messengerService.appContainer,this.messengerService.iframeUrlOrigin,this.messengerService.tmsgInitData,this.messengerService.widgetOptions))}}listenForGuestZoneSwitching(){window.addEventListener("storage",this.onStorage)}destroy(){window.removeEventListener("storage",this.onStorage)}checkForGuestZone(){if(!this.messengerService.tmsgInitData.user)try{localStorage.setItem(rt,"true"),localStorage.removeItem(rt)}catch(e){}}}(ot,at),ht={[t.Sso]:"SSO",[t.Webim]:"Webim"},ft={[r.Conversation]:"Conversation",[r.Error]:"Error",[r.ConversationsList]:"ConversationsList",[r.WelcomeForm]:"WelcomeForm",[r.ArchiveList]:"ArchiveList",[r.WidgetLongVersion]:"WidgetLongVersion",[r.DiscussionAbout]:"DiscussionAbout",[r.DiscussionEdit]:"DiscussionEdit",[r.DiscussionUserEdit]:"DiscussionUserEdit",[r.ValidationInput]:"ValidationInput"},vt={[o.Auto]:"Auto",[o.Visible]:"Visible",[o.Hidden]:"Hidden",[o.SingleConversationOnly]:"SingleConversationOnly"};const bt=new class WidgetApi{constructor(t,n,s,i,r,o,a,u,d){this.eventEmitter=t,this.messengerService=n,this.mobileService=s,this.domService=i,this.notificationService=r,this.appPostMessageService=o,this.lazyMessengerInitService=a,this.webimAuthService=u,this.statistService=d,this.parentUrl=window.location.href.split("?")[0],this.eventEmitter.on(e.InitTmsg,this.initTmsg.bind(this)),this.eventEmitter.on(e.OpenMessenger,this.openMessenger.bind(this)),this.eventEmitter.on(e.CloseMessenger,this.closeMessenger.bind(this)),this.eventEmitter.on(e.ToggleMessenger,this.toggleMessenger.bind(this)),this.eventEmitter.on(c.Resize,(e=>{this.appPostMessageService.sendPostMessage(l.PlatformResize,{isMobileMode:e})})),this.eventEmitter.on(c.ViewportResize,(e=>{this.appPostMessageService.sendPostMessage(l.PlatformViewportResize,e)})),this.statistService.send("launcher.load.success",{url:this.parentUrl})}initSmeButton(e){this.statistService.send("launcher.api.initSmeButton.called",{url:this.parentUrl}),this.mobileService.shouldCheckMobileMode=!0,this.domService.addWidgetStylesAndElements(e),this.domService.closeMessengerOnStart=!1,this.domService.setMessengerClosedStyles()}initSmeFrame(e,t,n={}){this.statistService.send("launcher.api.initSmeFrame.called",{url:this.parentUrl,appId:t.appId}),this.initSme(this.messengerService.appContainer,e,t,n),this.domService.listenUnreadIndicatorChanges(),this.domService.listenUnreadMessagesCountChange()}initSmeWithButton(e,t,n,s={}){this.statistService.send("launcher.api.initSmeWithButton.called",{url:this.parentUrl,appId:n.appId}),this.initSmeButton(e),this.initSmeFrame(t,n,s)}initSme(e,t,n,{closeButtonVisibility:s}={}){const i=this.messengerService.getAppId(n.location,"business");this.statistService.send("launcher.api.initSme.called",{url:this.parentUrl,appId:i}),this.domService.messengerContainer||(this.messengerService.appContainer=e);const r=Object.assign(Object.assign({},n),{appId:i});this.initTmsg(this.messengerService.appContainer,t,r,{closeButtonVisibility:s||o.Hidden})}initTmsg(e,n,s,i={}){var r,o,a,c;const l=s.appId||this.messengerService.getAppId(s.location,"default");this.statistService.send("launcher.api.initTmsg.called",{url:this.parentUrl,appId:l}),this.appPostMessageService.destroy(),this.notificationService.destroy(),this.mobileService.destroy(),this.webimAuthService.destroy(),null!==(r=(c=this.messengerService).appContainer)&&void 0!==r||(c.appContainer=e);const u=window.location.href.split("?")[0];this.mobileService.shouldCheckMobileMode=null!==(o=s.shouldCheckMobileMode)&&void 0!==o?o:this.mobileService.shouldCheckMobileMode,this.domService.addMessengerPreloader(),this.messengerService.tmsgInitData=Object.assign(Object.assign({},s),{chatStartInfo:Object.assign(Object.assign({},s.chatStartInfo),{referer:(null===(a=s.chatStartInfo)||void 0===a?void 0:a.referer)||u}),parentUrlPath:u}),this.messengerService.widgetOptions=i;const{authSystem:d,authZone:m}=this.messengerService.tmsgInitData,g=new URL(`${n}?appId=${l}`);d&&(g.searchParams.append("authSystem",d),d===t.Webim&&this.webimAuthService.listenForGuestZoneSwitching()),m&&g.searchParams.append("authZone",m),this.messengerService.iframeUrl=g.toString(),this.appPostMessageService.listenMessages(),this.notificationService.initialize(),this.domService.appendIframe(e),this.mobileService.initialize(this.domService.iframe)}initTmsgWithButton(e,t,n,s={}){this.statistService.send("launcher.api.initTmsgWithButton.called",{url:this.parentUrl,appId:n.appId});const{messengers:i,widgetButtonConfig:r,welcomeFormConfig:o}=s;this.mobileService.shouldCheckMobileMode=!0,this.domService.addWidgetStylesAndElements(e,r),i&&this.domService.addMessengersList(e,i),o&&(this.messengerService.welcomeFormConfig=o,this.domService.addWelcomeFormStyles()),this.domService.listenUnreadIndicatorChanges(),this.domService.listenUnreadMessagesCountChange();const a=this.initTmsg.bind(this,this.messengerService.appContainer,t,n,s);this.lazyMessengerInitService.initMessenger(a,n.messengerStartConfig)}initPlatform(e,n,{location:s,autofocus:i,data:r,user:o,title:a,requestNotificationPermission:c,closeButtonVisibility:l,platformType:u},d=!0){const m=this.messengerService.getTmsgHostUrl(n),g=this.messengerService.getAppId(s,"bank");this.statistService.send("launcher.api.initPlatform.called",{url:this.parentUrl,appId:g}),this.initTmsg(e,m,{location:s,autofocus:i,requestNotificationPermission:c,user:o,platformType:u,chatStartInfo:r,appId:g,authSystem:t.Webim,shouldCheckMobileMode:d},{title:a,closeButtonVisibility:l})}openMessenger(){this.statistService.send("launcher.api.openMessenger.called"),this.messengerService.isMessengerOpened=!0,this.domService.closeMessengerOnStart=!1,this.domService.onMessengerOpen(),this.lazyMessengerInitService.onMessengerOpen(),this.domService.onMessengersListClose(),this.eventEmitter.emit(i.OnMessengerOpen),this.appPostMessageService.sendPostMessage(l.MessengerOpenedStatus,{isMessengerOpened:this.messengerService.isMessengerOpened})}closeMessenger(){this.statistService.send("launcher.api.closeMessenger.called"),this.messengerService.isMessengerOpened=!1,this.domService.onMessengerClose(),this.domService.onMessengersListClose(),this.eventEmitter.emit(i.OnMessengerClose),this.appPostMessageService.sendPostMessage(l.MessengerOpenedStatus,{isMessengerOpened:this.messengerService.isMessengerOpened})}toggleMessenger(){this.statistService.send("launcher.api.toggleMessenger.called"),this.messengerService.isMessengerOpened||this.messengerService.isMessengersListOpened?this.closeMessenger():!this.domService.messengersListContainer||this.messengerService.isUnreadMessages?this.openMessenger():this.domService.onMessengersListOpen()}onMessengerUpdateSession(e){this.statistService.send("launcher.api.onMessengerUpdateSession.called"),this.eventEmitter.on(i.OnMessengerUpdateSession,(()=>{this.statistService.send("launcher.api.onMessengerUpdateSession.callback.called"),e()}))}onUnreadIndicatorChanged(e){this.statistService.send("launcher.api.onUnreadIndicatorChanged.called"),this.eventEmitter.on(i.OnUnreadIndicatorChanged,(t=>{this.statistService.send("launcher.api.onUnreadIndicatorChanged.callback.called"),e(t)}))}onUnreadMessagesCountChange(e){this.statistService.send("launcher.api.onUnreadMessagesCountChange.called"),this.eventEmitter.on(i.OnUnreadMessagesCountChanged,(t=>{this.statistService.send("launcher.api.onUnreadMessagesCountChange.callback.called",{count:t}),e(t)}))}onMessengerOpen(e){this.statistService.send("launcher.api.onMessengerOpen.called"),this.eventEmitter.on(i.OnMessengerOpen,(()=>{this.statistService.send("launcher.api.onMessengerOpen.callback.called"),e()}))}onMessengerClose(e){this.statistService.send("launcher.api.onMessengerClose.called"),this.eventEmitter.on(i.OnMessengerClose,(()=>{this.statistService.send("launcher.api.onMessengerClose.callback.called"),e()}))}onMessengerInited(e){this.statistService.send("launcher.api.onMessengerInited.called"),this.eventEmitter.on(i.OnMessengerInited,(()=>{this.statistService.send("launcher.api.onMessengerInited.callback.called"),e()}))}onMessengerFail(e){this.statistService.send("launcher.api.onMessengerFail.called"),this.eventEmitter.on(i.OnMessengerFail,(()=>{this.statistService.send("launcher.api.onMessengerFail.callback.called"),e()}))}onMessengerScreenChanged(e){this.statistService.send("launcher.api.onMessengerScreenChanged.called"),this.eventEmitter.on(i.OnMessengerScreenChanged,(t=>{this.statistService.send("launcher.api.onMessengerScreenChanged.callback.called",{screen:ft[t]}),e(t)}))}setAppLocation(e){this.statistService.send("launcher.api.setAppLocation.called"),this.appPostMessageService.sendPostMessage(l.UpdateLocation,e)}updateUser({user:e,location:n,authZone:s},i){if(this.statistService.send("launcher.api.updateUser.called",{authSystem:ht[i]}),this.messengerService.isMessengerInited)switch(this.messengerService.tmsgInitData=Object.assign(Object.assign({},this.messengerService.tmsgInitData),{location:null!=n?n:this.messengerService.tmsgInitData.location,authZone:null!=s?s:this.messengerService.tmsgInitData.authZone,user:e}),i){case t.Sso:return void this.initTmsg(this.messengerService.appContainer,this.messengerService.iframeUrlOrigin,this.messengerService.tmsgInitData,this.messengerService.widgetOptions);case t.Webim:return this.webimAuthService.checkForGuestZone(),void this.initTmsg(this.messengerService.appContainer,this.messengerService.iframeUrlOrigin,this.messengerService.tmsgInitData,this.messengerService.widgetOptions);default:{const e=Object.values(t).map((e=>`"${e}"`)).join(" or ");throw new Error(`Widget API: Unknown authSystem were passed to updateUser method, expected ${e}, but got "${i}"`)}}}updateCompanyId(e){this.statistService.send("launcher.api.updateCompanyId.called"),this.appPostMessageService.sendPostMessage(l.UpdateCompanyId,e)}updateApplications(e){this.statistService.send("launcher.api.updateApplications.called"),this.appPostMessageService.sendPostMessage(l.UpdateApplications,e)}updateLocale(e){this.statistService.send("launcher.api.updateLocale.called",{locale:e}),this.appPostMessageService.sendPostMessage(l.UpdateLocale,e)}updateCloseButtonVisibility(e){this.statistService.send("launcher.api.updateCloseButtonVisibility.called",{visibility:vt[e]}),this.appPostMessageService.sendPostMessage(l.TmsgCloseButtonVisibility,e)}openConversationById(e){this.statistService.send("launcher.api.openConversationById.called"),this.appPostMessageService.sendPostMessage(l.OpenConversationById,e)}openConversationByAppId(){this.openSupportConversation()}openSupportConversation(){this.statistService.send("launcher.api.openSupportConversation.called"),this.appPostMessageService.sendPostMessage(l.OpenSupportConversation)}openConversationWithDraftMessage(e){this.statistService.send("launcher.api.openConversationWithDraftMessage.called"),this.appPostMessageService.sendPostMessage(l.TmsgOpenDraft,{messageDraft:e})}sendMessage({message:e}){this.statistService.send("launcher.api.sendMessage.called"),this.appPostMessageService.sendPostMessage(l.TmsgSendMessage,{message:e})}}(ot,at,lt,ut,dt,mt,gt,pt,ct);window["t-messenger"]={api:bt}})()})();